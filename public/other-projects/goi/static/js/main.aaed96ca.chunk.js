(this.webpackJsonpgoi=this.webpackJsonpgoi||[]).push([[0],{149:function(e,t,a){e.exports=a(238)},154:function(e,t,a){},155:function(e,t,a){},214:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),i=a.n(c),o=(a(154),a(15)),s=a(30);a(155);function u(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement("h1",null,"Goi")))}var l=a(25),d=a(280),f=a(302),p=a(4),h=a(283),m=a(285),b=a(286),k=a(287),g=a(289),v=a(288),O=a(83),w=a(137),y=a.n(w),S=Object(d.a)((function(e){return Object(f.a)({root:{},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:"red"}})}));function j(e){var t=S(),a=r.a.useState(!1),n=Object(o.a)(a,2),c=n[0],i=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{style:{marginTop:"2em",width:"23em",display:"flex",flexDirection:"column"},className:t.root},r.a.createElement(m.a,{title:""}),r.a.createElement(b.a,null,r.a.createElement("div",{style:{height:"3em",marginTop:"3em"}},r.a.createElement(O.a,{paragraph:!0,style:{}},e.front))),r.a.createElement(k.a,{disableSpacing:!0},r.a.createElement(v.a,{className:Object(p.a)(t.expand,Object(l.a)({},t.expandOpen,c)),onClick:function(){i(!c)},"aria-expanded":c,"aria-label":"show more"},r.a.createElement(y.a,null))),r.a.createElement(g.a,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement(b.a,{style:{marginTop:"4em"}},r.a.createElement("div",{style:{height:"5em",alignItems:"center"}},r.a.createElement(O.a,{paragraph:!0},e.back))))))}var x=a(239);function E(e){return r.a.createElement(x.a,{style:{margin:"2em",width:"20vw",height:"12vw",justifyItems:"center",display:"flex",fontSize:"1.5em"},onClick:function(){console.log(e.name),e.dispatch({type:"view deck detail",deckName:e.name})}},r.a.createElement("div",{style:{margin:"auto"}},e.name))}function N(e){return r.a.createElement(r.a.Fragment,null,e.deckNames.map((function(t,a){return r.a.createElement(E,{key:a,name:t,dispatch:e.dispatch})})))}function C(e){var t,a=e.program,n=e.dispatch,c=null===a||void 0===a||null===(t=a.create_decks)||void 0===t?void 0:t.map((function(e){return e.deck}));if(!c||0===c.length)return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"You have no deck! \ud83d\ude40 Enter something in the editor!"));var i=c[c.length-1],o=i.cards[i.cards.length-1],s=o.front,u=o.back;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-view-container"},r.a.createElement("div",{className:"card-view"},r.a.createElement("h1",{style:{color:"#333333"}},"Deck: ",a.create_decks[a.create_decks.length-1].name),r.a.createElement(j,{front:s,back:u}),r.a.createElement("div",{style:{marginTop:"2em",display:"grid",gridTemplateColumns:"1fr 1fr"}},r.a.createElement(N,{deckNames:a.create_decks.map((function(e){return e.name})),dispatch:n})))))}a(102),a(160),a(161);var _=a(80),D=a(8),T=a(13),A=a(11),z=a(12);function R(){var e;L()&&(e=console).log.apply(e,arguments)}function I(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];R.apply(void 0,["\ud83c\udf49 "].concat(t))}function L(){return"on"==="on".toLowerCase()}function P(e){return e.sort((function(){return Math.random()-.5}))}function M(e,t,a,n,r,c){var i=n.toString()+"/"+(r+n).toString();return{indexString:e.toString()+".)",front:t,back:a,score:i,deck:c}}function F(e,t,a,n){return{indexString:e.toString()+".)",name:t,count:a,score:n}}function U(e,t,a,n,r,c){var i=a.toString()+"/"+t.toString(),o=c.join(", "),s=e.toString()+".)",u=+new Date(n),l=+new Date(r),d=u.toString(),f=u-l;return{indexString:s,dateString:d,count:t,score:i,duration:Math.round(f%864e5%36e5/6e4),decksString:o}}function Q(e){for(var t=e,a=t.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),r=t[a];t[a]=t[n],t[n]=r}return t}var q=function(){function e(t,a){Object(D.a)(this,e),this.tokens=void 0,this.currentToken=void 0,e.program=t,e.literals=a,this.tokens=[],this.currentToken=0,this.tokenize()}return Object(T.a)(e,[{key:"tokenize",value:function(){var t=e.program;t=t.replace(/\n/g,"_"),R(e.program),e.literals.forEach((function(e){R("string: ",e);var a=new RegExp(e,"ig");R("regexp: ",a),R(t=t.replace(a,"_".concat(e,"_")))})),R(t=t.replace(/__/g,"_"));var a=t.split("_").slice(1);this.tokens=a.map((function(e){return e.trim()})).filter((function(e){return""!==e})),R(this.tokens)}},{key:"checkNext",value:function(){return this.currentToken<this.tokens.length?this.tokens[this.currentToken]:"NO_MORE_TOKENS"}},{key:"getNext",value:function(){var e="";return this.currentToken<this.tokens.length?(e=this.tokens[this.currentToken],this.currentToken++):e="NULLTOKEN",e}},{key:"checkToken",value:function(e){var t=this.checkNext(),a=new RegExp(e);return R("comparing: |".concat(t,"|  to  |").concat(e,"|")),!!t.match(a)}},{key:"getAndCheckToken",value:function(e){var t=this.getNext(),a=new RegExp(e);if(!t.match(a))throw Error("Unexpected next token for Parsing! Expected something matching: ".concat(e," but got: ").concat(t));return R("matched: ".concat(t,"  to  ").concat(e)),t}},{key:"moreTokens",value:function(){return this.currentToken<this.tokens.length}}],[{key:"makeTokenizer",value:function(t,a){this.theTokenizer=new e(t,a)}},{key:"getTokenizer",value:function(){return this.theTokenizer}}]),e}();q.program=void 0,q.literals=void 0,q.theTokenizer=void 0;var B=q,K=function(){function e(){Object(D.a)(this,e),this.tokenizer=B.getTokenizer()}return Object(T.a)(e,[{key:"parse",value:function(){throw new Error("parse not implemented")}},{key:"evaluate",value:function(){throw new Error("evaluate not implemented")}}]),e}(),W=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).cardNumber=0,e.front="",e.back="",e}return Object(T.a)(a,[{key:"parse",value:function(){if(this.tokenizer.getAndCheckToken("\\("),!this.tokenizer.checkToken("^[1-9]+[0-9]*$"))throw new Error("Card number incorrect in Card");this.cardNumber=parseInt(this.tokenizer.getNext()),this.tokenizer.getAndCheckToken("\\)"),this.front=this.tokenizer.getNext(),this.tokenizer.getAndCheckToken(":"),this.back=this.tokenizer.getNext()}}]),a}(K),G=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).cards=[],e}return Object(T.a)(a,[{key:"parse",value:function(){for(;this.tokenizer.moreTokens()&&!this.tokenizer.checkToken("add color")&&!this.tokenizer.checkToken("add direction")&&!this.tokenizer.checkToken("add alignment")&&!this.tokenizer.checkToken("add tags")&&!this.tokenizer.checkToken("create deck");){var e=new W;e.parse(),this.cards.push(e)}}}]),a}(K),V=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).tagName="",e}return Object(T.a)(a,[{key:"parse",value:function(){this.tagName=this.tokenizer.getNext()}}]),a}(K),Y=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).tags=[],e.type="tags",e}return Object(T.a)(a,[{key:"parseInteractivePrompt",value:function(){for(this.tokenizer.getAndCheckToken("tags:");this.tokenizer.moreTokens();){var e=new V;e.parse(),this.tags.push(e),","===this.tokenizer.checkNext()&&this.tokenizer.getNext()}}},{key:"parse",value:function(){for("add tags"===this.tokenizer.checkNext().toLowerCase()&&this.tokenizer.getNext(),this.tokenizer.getAndCheckToken(":");this.tokenizer.moreTokens()&&!this.tokenizer.checkToken("add color")&&!this.tokenizer.checkToken("add direction")&&!this.tokenizer.checkToken("add alignment")&&!this.tokenizer.checkToken("\\(");){","===this.tokenizer.checkNext()&&this.tokenizer.getNext();var e=new V;e.parse(),this.tags.push(e)}}}]),a}(K),J=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).attribute={attributeType:"",value:""},e}return Object(T.a)(a,[{key:"parse",value:function(){var e=this.tokenizer.getNext();switch(this.tokenizer.getAndCheckToken(":"),e){case"add Alignment":if(this.attribute.attributeType="alignment",!this.tokenizer.checkToken("center|right|left"))throw new Error("Alignment Attribute is not valid");this.attribute.value=this.tokenizer.getNext();break;case"add Direction":if(this.attribute.attributeType="direction",!this.tokenizer.checkToken("horizontal|vertical"))throw new Error("Direction Attribute is not valid");this.attribute.value=this.tokenizer.getNext();break;case"add Color":if(this.attribute.attributeType="color",!this.tokenizer.checkToken("red|blue|yellow|purple|green|grey|brown"))throw new Error("Color Attribute is not valid");this.attribute.value=this.tokenizer.getNext();break;default:return}}}]),a}(K),H=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).attributes=[],e}return Object(T.a)(a,[{key:"parse",value:function(){if(this.tokenizer.checkToken("add color|add alignment|add direction"))for(;this.tokenizer.moreTokens()&&!this.tokenizer.checkToken("add tags")&&!this.tokenizer.checkToken("\\(");){var e=new J;e.parse(),this.attributes.push(e)}}}]),a}(K),$=[":","(",")",",","NULLTOKEN"],X=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).tags=null,e.attributes=null,e.deck=null,e.name="",e}return Object(T.a)(a,[{key:"checkForAndParseTags",value:function(){"add tags"===this.tokenizer.checkNext().toLowerCase()&&(this.tags=new Y,this.tags.parse())}},{key:"checkForAndParseAttributes",value:function(){this.tokenizer.checkToken("add color|add alignment|add direction")&&(this.attributes=new H,this.attributes.parse())}},{key:"checkForAndParseDeck",value:function(){this.tokenizer.checkToken("\\(")&&(this.deck=new G,this.deck.parse())}},{key:"parse",value:function(){this.tokenizer.getAndCheckToken("create deck");var e=this.tokenizer.getNext();if($.includes(e))throw new Error("invalid deck name");for(this.name=e,this.tokenizer.getAndCheckToken(":");this.tokenizer.moreTokens();){this.checkForAndParseTags(),this.checkForAndParseAttributes(),this.checkForAndParseDeck();break}}}]),a}(K),Z=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).create_decks=[],e}return Object(T.a)(a,[{key:"parse",value:function(){for(;this.tokenizer.moreTokens()&&this.tokenizer.checkToken("create deck");){var e=new X;e.parse(),this.create_decks.push(e)}}}]),a}(K),ee=["best","worst","random","oldest","newest"],te=[].concat(ee,["show stats for","start session from","help","list","export decks","load decks","quit","back to home",",","cards from"],["decks:","tags:","past sessions"]),ae=["create deck",":","\\(","\\)",","];function ne(e,t,a){var n=e.getDoc();(function(e,t){var a=(e=e.toLowerCase()).split("\n"),n=[];return a.forEach((function(e,a){t.forEach((function(t){var r=e.indexOf(t);-1!==r&&n.push({lineNumber:a,charStart:r,charEnd:r+t.length})}))})),n})(n.getValue(),t).forEach((function(e){n.markText({line:e.lineNumber,ch:e.charStart},{line:e.lineNumber,ch:e.charEnd},{className:a||"syntax-highlight"})}))}var re,ce=a(40),ie=a(19),oe=a(5),se=a.n(oe),ue=a(9);function le(e,t){var a,n,r=null===(a=e.deck)||void 0===a?void 0:a.cards,c=null===(n=t.deck)||void 0===n?void 0:n.cards;return null==r?{type:re.CopyPasteSingleDeck,deckName:t.name}:null==c||r.length>c.length?{type:re.Delete}:c.length===r.length+1?function(e,t,a){for(var n=[],r=0;r<e.length;++r){var c=e[r],i=c.front,o=c.back,s=t[r];s.front===i&&s.back===o||n.push(s)}if(0===n.length){var u=t[t.length-1],l=u.front,d=u.back;return{type:re.CreateCard,deckName:a,front:l,back:d}}if(1===n.length){var f=n[0],p=f.front,h=f.back;return{type:re.CreateCard,deckName:a,front:p,back:h}}return{type:re.CopyPasteSingleDeck,deckName:a}}(r,c,e.name):{type:re.CopyPasteSingleDeck,deckName:t.name}}function de(e,t){var a=function(e,t){var a=0,n=void 0;return e.forEach((function(e,r){var c,i,o,s,u=t[r];(null===(c=e.deck)||void 0===c||null===(i=c.cards)||void 0===i?void 0:i.length)!==(null===(o=u.deck)||void 0===o||null===(s=o.cards)||void 0===s?void 0:s.length)&&1===++a&&(n=r)})),{numDifferences:a,firstDifference:n}}(e,t),n=a.numDifferences,r=a.firstDifference;return n>1?{type:re.CopyPasteMultiDecks}:1===n?le(e[r],t[r]):function(e,t){for(var a=void 0,n=0;n<e.length;++n){var r,c,i=null===(r=e[n].deck)||void 0===r?void 0:r.cards,o=null===(c=t[n].deck)||void 0===c?void 0:c.cards;if(i&&o)for(var s=0;s<i.length;++s)if(i[s].front!==o[s].front||i[s].back!==o[s].back)if(i[s].front===o[s].front&&i[s].back!==o[s].back){if(a)return{type:re.CopyPasteMultiDecks};a={type:re.UpdateCardBack,deckName:e[n].name,front:i[s].front,oldBack:i[s].back,newBack:o[s].back}}else{if(i[s].front===o[s].front||i[s].back!==o[s].back)return{type:re.CopyPasteMultiDecks};if(a)return{type:re.CopyPasteMultiDecks};a={type:re.UpdateCardFront,deckName:e[n].name,oldFront:i[s].front,newFront:o[s].front,back:i[s].back}}}return a||{type:re.Nothing}}(e,t)}function fe(e,t){var a=e.create_decks,n=t.create_decks;if(a.length>n.length)return{type:re.Delete};if(a.length<n.length)return a.length===n.length-1?function(e,t){var a={};e.forEach((function(e){a[e.name]=!0}));var n=[];if(t.forEach((function(e,t){a[e.name]||n.push({name:e.name,idx:t})})),1===n.length){var r,c=n[0],i=c.name;return(null===(r=t[c.idx].deck.cards)||void 0===r?void 0:r.length)>1?{type:re.CopyPasteSingleDeck,deckName:i}:{type:re.CreateDeck,deckName:i}}return{type:re.CopyPasteMultiDecks}}(a,n):{type:re.CopyPasteMultiDecks};var r,c=(r=n,a.reduce((function(e,t,a){return t.name!==r[a].name?e+1:e}),0));return c>1?{type:re.CopyPasteMultiDecks}:1===c?function(e,t){for(var a=0;a<e.length&&e[a].name===t[a].name;)++a;var n=e[a],r=t[a];return function(e,t){var a,n,r,c,i,o;if((null===(a=e.deck)||void 0===a||null===(n=a.cards)||void 0===n?void 0:n.length)!==(null===(r=t.deck)||void 0===r||null===(c=r.cards)||void 0===c?void 0:c.length))return!1;if(null==(null===(i=e.deck)||void 0===i?void 0:i.cards)||null==(null===(o=t.deck)||void 0===o?void 0:o.cards))return!1;var s=e.deck.cards,u=t.deck.cards;return!s.find((function(e,t){var a=u[t];return e.cardNumber!==a.cardNumber||e.front!==a.front||e.back!==a.back}))}(n,r)?{type:re.UpdateDeckName,oldDeckName:n.name,newDeckName:r.name}:{type:re.CopyPasteSingleDeck,deckName:r.name}}(a,n):de(a,n)}!function(e){e.CreateDeck="create deck",e.CreateCard="create card",e.UpdateDeckName="update deck name",e.UpdateCardFront="update card front",e.UpdateCardBack="update card back",e.CopyPasteMultiDecks="copy paste multi decks",e.CopyPasteSingleDeck="copy paste single deck",e.Delete="deleted something",e.Nothing="nothing"}(re||(re={}));var pe,he=a(6);function me(e,t,a){return be.apply(this,arguments)}function be(){return(be=Object(ue.a)(se.a.mark((function e(t,a,n){var r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("Attempting to update deck name ".concat(t," -> ").concat(a)),e.prev=1,r=n.collections.get(pe.DECKS),e.next=5,n.action(Object(ue.a)(se.a.mark((function e(){var n,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.query(he.Q.where("name",he.Q.eq(t))).fetch();case 2:if(1!==(n=e.sent).length){e.next=10;break}return c=n[0],e.next=7,c.update((function(e){e.name=a}));case 7:I("Success! Updated deck name ".concat(t," -> ").concat(a)),e.next=11;break;case 10:throw new Error("reconciler::updateDeckName -- found ".concat(n.length," decks with the name ").concat(t,"!"));case 11:case"end":return e.stop()}}),e)}))));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),I(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ke(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(ue.a)(se.a.mark((function e(t,a){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===re.UpdateCardFront||t.type===re.UpdateCardBack||t.type===re.CreateCard){e.next=3;break}return I("Unexpected input to reconciler::createOrUpdateCard"),e.abrupt("return");case 3:return I("Attempting to create or update card in deck ".concat(t.deckName)),e.prev=4,n=a.collections.get(pe.DECKS),e.next=8,a.action(Object(ue.a)(se.a.mark((function e(){var r,c,i,o,s,u,l,d,f;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.query(he.Q.where("name",he.Q.eq(t.deckName))).fetch();case 2:if(1!==(r=e.sent).length){e.next=45;break}if(I("Corresponding deck found!"),c=r[0],t.type!==re.CreateCard){e.next=12;break}return I("Attempting to add new card. Front: ".concat(t.front," | Back: ").concat(t.back)),e.next=10,c.subAction((function(){return c.addCard(t.front,t.back)}));case 10:return I("Successfully added card! Front: ".concat(t.front," | Back: ").concat(t.back)),e.abrupt("return");case 12:if(i=a.collections.get(pe.CARDS),t.type!==re.UpdateCardFront){e.next=29;break}return o=i.query(he.Q.where("back",he.Q.eq(t.back)),he.Q.where("front",he.Q.eq(t.oldFront)),he.Q.where("deck_id",he.Q.eq(c.id))),e.next=17,o.fetch();case 17:if(1!==(s=e.sent).length){e.next=26;break}return I("Corresponding card found!"),u=s[0],e.next=23,u.update((function(e){e.front=t.newFront}));case 23:I("Successfully updated card front!"),e.next=27;break;case 26:throw new Error("reconciler::createOrUpdateCard -- found ".concat(s.length," cards with the same deck, front and back when attempting to update card!"));case 27:e.next=43;break;case 29:if(t.type!==re.UpdateCardBack){e.next=43;break}return l=i.query(he.Q.where("back",he.Q.eq(t.oldBack)),he.Q.where("front",he.Q.eq(t.front)),he.Q.where("deck_id",he.Q.eq(c.id))),e.next=33,l.fetch();case 33:if(1!==(d=e.sent).length){e.next=42;break}return I("Corresponding card found!"),f=d[0],e.next=39,f.update((function(e){e.back=t.newBack}));case 39:I("Successfully updated card back!"),e.next=43;break;case 42:throw new Error("reconciler::createOrUpdateCard -- found ".concat(d.length," cards with the same deck, front and back when attempting to update card!"));case 43:e.next=46;break;case 45:throw new Error("reconciler::createOrUpdateCard -- found ".concat(r.length," decks with the name ").concat(t.deckName,"!"));case 46:case"end":return e.stop()}}),e)}))));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),I("createOrUpdateCard",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function ve(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(ue.a)(se.a.mark((function e(t,a){var n,r,c,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,c=null===(n=t.deck)||void 0===n?void 0:n.cards,I("Reconciling entire deck ".concat(r," with DB...")),e.prev=3,i=a.collections.get(pe.DECKS),e.next=7,a.action(Object(ue.a)(se.a.mark((function e(){var t,n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.query(he.Q.where("name",he.Q.eq(r))).fetch();case 2:if(0!==(t=e.sent).length){e.next=8;break}return e.delegateYield(se.a.mark((function e(){var t,a,n,o;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("DB has no deck with this name. Creating..."),e.next=3,i.create((function(e){e.name=r}));case 3:if(t=e.sent,I("Created!"),!c){e.next=23;break}a=Object(ie.a)(c),e.prev=7,o=se.a.mark((function e(){var a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.value,I("Creating new card (Front: ".concat(a.front,", Back: ").concat(a.back,")")),e.next=4,t.subAction((function(){return t.addCard(a.front,a.back)}));case 4:case"end":return e.stop()}}),e)})),a.s();case 10:if((n=a.n()).done){e.next=14;break}return e.delegateYield(o(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:I("Finished adding its cards to the DB!");case 23:return I("Done adding deck ".concat(r," to the DB!")),e.abrupt("return",{v:void 0});case 25:case"end":return e.stop()}}),e,null,[[7,16,19,22]])}))(),"t0",5);case 5:if("object"!==typeof(n=e.t0)){e.next=8;break}return e.abrupt("return",n.v);case 8:if(1!==t.length){e.next=12;break}return e.delegateYield(se.a.mark((function e(){var n,r,i,o,s;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I("Found 1 deck with this name already in the DB. Reconciling its cards now..."),n=t[0],!c){e.next=23;break}r=a.collections.get(pe.CARDS),i=Object(ie.a)(c),e.prev=5,s=se.a.mark((function e(){var t,a,c,i,s,u,l,d,f;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,I("Looking for card in deck (Front: ".concat(t.front,", Back: ").concat(t.back,")")),a=r.query(he.Q.where("deck_id",he.Q.eq(n.id)),he.Q.where("front",he.Q.eq(t.front)),he.Q.where("back",he.Q.eq(t.back))),e.next=5,a.fetchCount();case 5:if(1!==(c=e.sent)){e.next=9;break}return I("Card already exists in deck (Front: ".concat(t.front,", Back: ").concat(t.back,")")),e.abrupt("return","continue");case 9:if(!(c>1)){e.next=12;break}return I("Unexpected: ".concat(c," copies of card exists in deck (Front: ").concat(t.front,", Back: ").concat(t.back,")")),e.abrupt("return","continue");case 12:return I("Not found. Looking for card with just same front..."),i=r.query(he.Q.where("deck_id",he.Q.eq(n.id)),he.Q.where("front",he.Q.eq(t.front))),e.next=16,i.fetch();case 16:if(0!==(s=e.sent).length){e.next=39;break}return I("Not found. Looking for card with same back..."),u=r.query(he.Q.where("deck_id",he.Q.eq(n.id)),he.Q.where("back",he.Q.eq(t.back))),e.next=22,u.fetch();case 22:if(0!==(l=e.sent).length){e.next=29;break}return I("Creating new card (Front: ".concat(t.front,", Back: ").concat(t.back,")")),e.next=27,n.subAction((function(){return n.addCard(t.front,t.back)}));case 27:return I("Done creating new card."),e.abrupt("return","continue");case 29:if(1!==l.length){e.next=36;break}return d=l[0],I("Found a single card with matching back, so updating front."),e.next=34,d.update((function(e){e.front=t.front}));case 34:return I("Done updating front of card."),e.abrupt("return","continue");case 36:if(!(l.length>1)){e.next=39;break}return I("Unexpected: found ".concat(l.length," cards in deck have the same back (").concat(t.back,")")),e.abrupt("return","continue");case 39:if(1!==s.length){e.next=46;break}return f=s[0],I("Found a single card with matching front, so updating back."),e.next=44,f.update((function(e){e.back=t.back}));case 44:return I("Done updating back of card."),e.abrupt("return","continue");case 46:if(!(s.length>1)){e.next=49;break}return I("Unexpected: found ".concat(s.length," cards in deck have the same front (").concat(t.front,")")),e.abrupt("return","continue");case 49:case"end":return e.stop()}}),e)})),i.s();case 8:if((o=i.n()).done){e.next=15;break}return e.delegateYield(s(),"t0",10);case 10:if("continue"!==e.t0){e.next=13;break}return e.abrupt("continue",13);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(5),i.e(e.t1);case 20:return e.prev=20,i.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))(),"t1",10);case 10:e.next=13;break;case 12:throw new Error("Found ".concat(t.length," decks with the same name,"));case 13:case"end":return e.stop()}}),e)}))));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),I("createOrUpdateEntireDeck Error: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function we(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(ue.a)(se.a.mark((function e(t,a){var n,r,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("Beginning to process what is guessed to be a multi-deck copy paste"),e.prev=1,n=Object(ie.a)(t.create_decks),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=11;break}return c=r.value,e.next=9,ve(c,a);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:I("Finished processing what is guessed to be a multi-deck copy paste!"),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(1),I("createOrUpdateAllDecks Error: ",e.t1);case 25:case"end":return e.stop()}}),e,null,[[1,22],[3,13,16,19]])})))).apply(this,arguments)}function Se(){return(Se=Object(ue.a)(se.a.mark((function e(t,a,n){var r,c,i,o,s;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("Guessed action:",r=fe(t,a)),e.t0=r.type,e.next=e.t0===re.Nothing||e.t0===re.Delete?5:e.t0===re.UpdateDeckName?6:e.t0===re.UpdateCardFront||e.t0===re.UpdateCardBack||e.t0===re.CreateCard?10:e.t0===re.CopyPasteSingleDeck||e.t0===re.CreateDeck?13:e.t0===re.CopyPasteMultiDecks?18:21;break;case 5:return e.abrupt("return");case 6:return c=r.oldDeckName,i=r.newDeckName,e.next=9,me(c,i,n);case 9:return e.abrupt("return");case 10:return e.next=12,ke(r,n);case 12:return e.abrupt("return");case 13:return o=r.deckName,s=a.create_decks.find((function(e){return e.name===o})),e.next=17,ve(s,n);case 17:return e.abrupt("return");case 18:return e.next=20,we(a,n);case 20:return e.abrupt("return");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.DECKS="decks",e.CARDS="cards",e.SESSIONS="sessions",e.SESSIONS_CARDS="sessions_cards",e.TAGS="tags",e.TAGS_CARDS="tags_cards"}(pe||(pe={}));var je="Create Deck Practice Final:\n(1) Foo : Bar\n(2) Bill : Gates\n(3) Steve : Jobs\n(4) Justin : Trudeau \n(5) Evan : You\n";var xe=["create deck","(",":",")"];function Ee(e){var t=Object(ce.useDatabase)(),a=e.initialText,n=e.isInSession;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-editor"},n?r.a.createElement("div",{className:"card-editor-codemirror card-hider"},a):r.a.createElement(_.UnControlled,{value:a,options:{mode:"xml",theme:"ayu-mirage",lineNumbers:!0},editorDidMount:function(t,a){ne(t,xe),e.dispatch({type:xa.SetCardEditor,cardEditor:t})},onChange:function(a,n,r){ne(a,xe),localStorage.setItem("cardEditorStrKey",r);try{B.makeTokenizer(r,ae);var c=new Z;c.parse(),0!==c.create_decks.length&&null===c.create_decks[c.create_decks.length-1].deck?R("last deck is null, not sending dispatch"):(localStorage.setItem("programAST",JSON.stringify(c)),function(e,t,a){return Se.apply(this,arguments)}(e.program,c,t).then((function(){return I("Background DB update complete!")})).catch((function(e){return I("Error during reconciliation!",e)})),e.dispatch({type:xa.CardEditorParseSuccess,program:c}))}catch(i){R(i)}},className:"card-editor-codemirror"})))}a(209);var Ne,Ce=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).decks=[],e.type="decks",e}return Object(T.a)(a,[{key:"parseInteractivePrompt",value:function(){for(this.tokenizer.getAndCheckToken("decks:");this.tokenizer.moreTokens();)this.decks.push(this.tokenizer.getNext()),","===this.tokenizer.checkNext()&&this.tokenizer.getNext()}}]),a}(K),_e=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).type="sessions",e}return Object(T.a)(a,[{key:"parseInteractivePrompt",value:function(){this.tokenizer.getAndCheckToken("past sessions")}}]),a}(K);!function(e){e.Decks="decks",e.Sessions="sessions",e.Tags="tags",e.Undefined="undefined"}(Ne||(Ne={}));var De=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).subject=null,e.subjectType=Ne.Undefined,e}return Object(T.a)(a,[{key:"parse",value:function(){var e=this.tokenizer.checkNext();if("past sessions"===e)this.subject=new _e,this.subjectType=Ne.Sessions;else if("decks:"===e)this.subject=new Ce,this.subjectType=Ne.Decks;else{if("tags:"!==e)throw new Error("Invalid Subject, must be 'Decks:', 'Tags:', or 'Past Sessions'");this.subject=new Y,this.subjectType=Ne.Tags}this.subject.parseInteractivePrompt()}}]),a}(K),Te=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).type="",e.filter="newest",e.limit=100,e.selectCards=!1,e}return Object(T.a)(a,[{key:"parse",value:function(){var e=this.tokenizer.getNext();if("show stats for"===e)this.type="show stats";else{if("start session from"!==e)throw new Error("Command must either start with 'Show stats for' or 'Start Session from'");this.type="start session"}var t=this.tokenizer.checkNext();isNaN(Number(t))||(this.limit=Math.round(Number(this.tokenizer.getNext())),t=this.tokenizer.checkNext()),ee.includes(t)&&(this.filter=this.tokenizer.getNext(),t=this.tokenizer.checkNext()),"cards from"===t&&(this.selectCards=!0,this.tokenizer.getNext())}}]),a}(K),Ae=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).subjectModfier=null,e.subject=null,e}return Object(T.a)(a,[{key:"parse",value:function(){this.subjectModfier=new Te,this.subjectModfier.parse(),this.subject=new De,this.subject.parse()}}]),a}(K),ze=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).type="",e}return Object(T.a)(a,[{key:"parse",value:function(){this.type="help",this.tokenizer.getAndCheckToken("help")}}]),a}(K),Re=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).option="",e}return Object(T.a)(a,[{key:"parse",value:function(){if(this.tokenizer.getAndCheckToken("list"),this.option=this.tokenizer.getNext(),"tags"!==this.option&&"decks"!==this.option)throw new Error("Invalid list option")}}]),a}(K),Ie=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"parse",value:function(){this.tokenizer.getAndCheckToken("export decks")}},{key:"evaluate",value:function(){var e=localStorage.getItem("cardEditorStrKey"),t=document.createElement("a");t.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),t.download="".concat((new Date).toISOString(),".txt"),t.click()}}]),a}(K),Le=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"parse",value:function(){this.tokenizer.getAndCheckToken("load decks")}}]),a}(K),Pe=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"parse",value:function(){this.tokenizer.getAndCheckToken("^quit$|^back to home$")}}]),a}(K),Me=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).type="",e.command=null,e}return Object(T.a)(a,[{key:"parse",value:function(){var e=this.tokenizer.checkNext();if("help"===e?(this.command=new ze,this.type="help"):"list"===e?(this.command=new Re,this.type="list"):"export decks"===e?(this.command=new Ie,this.type="export decks"):"load decks"===e?(this.command=new Le,this.type="load decks"):"quit"===e||"back to home"===e?(this.command=new Pe,this.type="quit to home"):(this.command=new Ae,this.type="complex command"),null===this.command)throw new Error("Invalid command specified");this.command.parse()}},{key:"evaluate",value:function(){this.command.evaluate()}}]),a}(K),Fe=a(301),Ue=a(138),Qe=a.n(Ue),qe=r.a.createElement("div",{style:{fontSize:"14px",lineHeight:"9px"}},r.a.createElement("h4",null,"To start a session from decks:"),"Start Session from [choose \u2018random card\u2019, ect ] from Decks: [choose 1 or more deck names]",r.a.createElement("h4",null,"To start a session from tags:"),"Start Session from [choose \u2018random card\u2019, ect ] from Tags: [choose 1 or more tag names]",r.a.createElement("h4",null,"To show stats:")," Show stats for [choose one or more \u2018best scores for\u2019, \u2018average time spent on\u2019, \u2018worst scores for\u2019] Decks: [choose 1 or more deck names]",r.a.createElement("h4",null,"To download your decks:")," Enter 'export decks'",r.a.createElement("h4",null,"To load decks from your computer:")," Enter 'load decks'",r.a.createElement("h4",null,"To go back to Home:")," Enter 'quit' or 'back to home'"),Be="";function Ke(e){var t=r.a.useState(!1),a=Object(o.a)(t,2),n=a[0],c=a[1],i=function(e,t){"clickaway"!==t&&c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"command-editor"},r.a.createElement(_.UnControlled,{value:"> Show stats for cards from Decks: Practice Final",options:{mode:"xml",theme:"yonce",lineNumbers:!0},editorDidMount:function(e,t){ne(e,te)},onChange:function(t,a,n){if(ne(t,te),n.startsWith("> ")||(t.getDoc().setValue("> "),t.getDoc().setCursor(2)),n.includes("\n")){var r=!1;try{B.makeTokenizer(n,te);var i=new Me;if(i.parse(),console.log(i.command),"list"===i.type){var o=i.command;"decks"===o.option?e.dispatch({type:xa.List,listOption:"decks"}):"tags"===o.option?e.dispatch({type:xa.List,listOption:"tags"}):console.log("Unexpected list option: ",o.option)}else if("help"===i.type)r=!0;else if("export decks"===i.type)i.evaluate();else if("quit to home"===i.type)e.dispatch({type:xa.QuitToHome});else if("load decks"===i.type){var s=document.createElement("input");s.type="file",s.onchange=function(t){var a=t.target.files[0],n=new FileReader;n.readAsText(a,"UTF-8"),n.onload=function(t){var a=t.target.result;e.dispatch({type:xa.LoadDecks,createDSLValue:a})}},s.click()}else if(function(e){return"start session"===e.command.subjectModfier.type?(Be="start session",!0):"show stats"===e.command.subjectModfier.type&&(Be="show stats",!0)}(i)){var u=i.command.subjectModfier;if(u){var l="tags"===i.command.subject.subjectType;e.dispatch({type:"start session"===Be?xa.StartSession:xa.ShowStats,limit:u.limit,filter:u.filter,isLimitAppliedToCards:u.selectCards,deckNames:!l&&i.command.subject.subject.decks,subject:i.command.subject.subjectType,tagNames:l&&i.command.subject.subject.tags.map((function(e){return e.tagName}))})}}}catch(d){console.log(d),e.dispatch({type:xa.CommandNotFound})}r&&c(!0),t.getDoc().setValue("> "),t.getDoc().setCursor(2)}}})),r.a.createElement(Fe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:n,autoHideDuration:18e4,onClose:i,message:qe,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{size:"small","aria-label":"close",color:"inherit",onClick:i},r.a.createElement(Qe.a,{fontSize:"small"})))}))}var We=a(33),Ge=a(303),Ve=a(291),Ye=a(95),Je=a.n(Ye),He=a(96),$e=a.n(He),Xe=Object(d.a)({root:{width:"100%"}});function Ze(e){var t=e.cards,a=e.dispatch,n=e.setNextCard,c=e.addCardDataToLocalStorage,i=e.currentCard,s=e.currentResult,u=e.setResult,l=Xe(),d=Object(We.a)(),f=r.a.useState(0),p=Object(o.a)(f,2),h=p[0],m=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{variant:"text",steps:t.length,position:"static",activeStep:h,className:l.root,nextButton:r.a.createElement(Ve.a,{size:"small",onClick:function(){m((function(e){return e+1})),n(h+1),h==t.length-1&&a(!0),s?u(""):c(i,h,void 0)},disabled:h===t.length},"Next","rtl"===d.direction?r.a.createElement(Je.a,null):r.a.createElement($e.a,null)),backButton:r.a.createElement(Ve.a,{size:"small",onClick:function(){m((function(e){return e-1})),n(h-1)},disabled:0===h},"rtl"===d.direction?r.a.createElement($e.a,null):r.a.createElement(Je.a,null),"Back")}),r.a.createElement(Ge.a,{variant:"progress",steps:t.length,position:"static",activeStep:h,className:l.root,nextButton:null,backButton:null}))}var et=a(139),tt=a.n(et);function at(e){return r.a.createElement(h.a,{style:{width:"25em",height:"15em"}},r.a.createElement(b.a,{style:{paddingTop:"6.5em"}},r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},e.content)))}var nt=Object(d.a)({root:{marginTop:"1em",textAlign:"center",margin:"0 auto"}});function rt(e){var t=e.front,a=e.back,c=Object(n.useState)(!1),i=Object(o.a)(c,2),s=i[0],u=i[1],l=nt(),d=function(e){e.preventDefault(),u((function(e){return!e}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.root},r.a.createElement(tt.a,{isFlipped:s,flipDirection:"vertical"},r.a.createElement("div",{onClick:d},r.a.createElement(at,{content:t})),r.a.createElement("div",{onClick:d},r.a.createElement(at,{content:a,onClick:d})))))}var ct,it=a(82),ot=a.n(it);function st(e,t){return ut.apply(this,arguments)}function ut(){return(ut=Object(ue.a)(se.a.mark((function e(t,a){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collections.get(pe.DECKS),e.next=3,n.query(he.Q.where("name",he.Q.oneOf(a))).fetch();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t){return dt.apply(this,arguments)}function dt(){return(dt=Object(ue.a)(se.a.mark((function e(t,a){var n,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collections.get(pe.DECKS),e.next=3,n.query(he.Q.where("id",a)).fetch();case 3:if(!((r=e.sent).length<1)){e.next=6;break}throw new Error("Unable to retrieve deck name for ID ".concat(a));case 6:return e.abrupt("return",r[0].name);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e,t){return pt.apply(this,arguments)}function pt(){return(pt=Object(ue.a)(se.a.mark((function e(t,a){var n,r,c,i,o,s,u,l,d,f,p,h;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=t.collections.get(pe.CARDS),e.next=4,a.cards;case 4:c=e.sent,i=Object(ie.a)(c),e.prev=6,i.s();case 8:if((o=i.n()).done){e.next=17;break}return s=o.value,u={},e.next=13,r.query(he.Q.where("id",s.card_id)).fetch();case 13:l=e.sent[0],u[l.deck_id]||(u[l.deck_id]=!0,n.push(l.deck_id));case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:d=[],f=0,p=n;case 27:if(!(f<p.length)){e.next=37;break}return h=p[f],e.t1=d,e.next=32,lt(t,h);case 32:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 34:f++,e.next=27;break;case 37:return e.abrupt("return",d);case 38:case"end":return e.stop()}}),e,null,[[6,19,22,25]])})))).apply(this,arguments)}function ht(e,t){return mt.apply(this,arguments)}function mt(){return(mt=Object(ue.a)(se.a.mark((function e(t,a){var n,r,c,i,o;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,st(t,a);case 3:r=e.sent,c=Object(ie.a)(r),e.prev=5,c.s();case 7:if((i=c.n()).done){e.next=16;break}return o=i.value,e.t0=n,e.next=12,o.cards.fetch();case 12:e.t1=e.sent,n=e.t0.concat.call(e.t0,e.t1);case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t2=e.catch(5),c.e(e.t2);case 21:return e.prev=21,c.f(),e.finish(21);case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,null,[[5,18,21,24]])})))).apply(this,arguments)}function bt(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(ue.a)(se.a.mark((function e(t){var a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collections.get(pe.SESSIONS),e.next=3,a.query().fetch();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(e){return vt.apply(this,arguments)}function vt(){return(vt=Object(ue.a)(se.a.mark((function e(t){var a,n,r=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:5,e.next=3,bt(t);case 3:return n=e.sent,e.abrupt("return",n.sort((function(e,t){return t.started_at-e.started_at})).slice(0,a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e){return wt.apply(this,arguments)}function wt(){return(wt=Object(ue.a)(se.a.mark((function e(t){var a,n,r,c,i,o,s,u=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:5,n=[],e.next=4,gt(t,a);case 4:r=e.sent,c=Object(ie.a)(r),e.prev=6,c.s();case 8:if((i=c.n()).done){e.next=16;break}return o=i.value,e.next=12,o.cards;case 12:s=e.sent,n.concat(s);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),c.e(e.t0);case 21:return e.prev=21,c.f(),e.finish(21);case 24:return e.abrupt("return",Dt(n));case 25:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})))).apply(this,arguments)}function yt(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=[];switch(t){case ct.BEST:n=e.sort((function(e,t){return t.right-t.wrong-(e.right-e.wrong)})).slice(0,a);break;case ct.WORST:n=e.sort((function(e,t){return e.right-e.wrong-(t.right-t.wrong)})).slice(0,a);break;case ct.NEWEST:n=e.sort((function(e,t){return e.created_at-t.created_at})).slice(0,a);break;case ct.OLDEST:n=e.sort((function(e,t){return t.created_at-e.created_at})).slice(0,a);break;case ct.RANDOM:n=P(e).slice(0,a);break;default:throw new Error("Unknown CARD_MODIFIER: ".concat(t))}return n}function St(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Object(ue.a)(se.a.mark((function e(t,a){var n,r,c,i,o,s,u,l,d=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>2&&void 0!==d[2]?d[2]:1,r=[],c=new Map,i=Object(ie.a)(t),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=15;break}return s=o.value,e.next=10,s.cards.fetch();case 10:u=e.sent,l=Nt(u),c.set(s.id,l);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),i.e(e.t0);case 20:return e.prev=20,i.f(),e.finish(20);case 23:e.t1=a,e.next=e.t1===ct.BEST?26:e.t1===ct.WORST?28:e.t1===ct.NEWEST?30:e.t1===ct.OLDEST?32:e.t1===ct.RANDOM?34:36;break;case 26:return r=t.sort((function(e,t){return c.get(t.id)-c.get(e.id)})).slice(0,n),e.abrupt("break",37);case 28:return r=t.sort((function(e,t){return c.get(e.id)-c.get(t.id)})).slice(0,n),e.abrupt("break",37);case 30:return r=t.sort((function(e,t){return e.created_at-t.created_at})).slice(0,n),e.abrupt("break",37);case 32:return r=t.sort((function(e,t){return t.created_at-e.created_at})).slice(0,n),e.abrupt("break",37);case 34:return r=P(t).slice(0,n),e.abrupt("break",37);case 36:throw new Error("Unknown CARD_MODIFIER: ".concat(a));case 37:return e.abrupt("return",r);case 38:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})))).apply(this,arguments)}function xt(e,t,a){return Et.apply(this,arguments)}function Et(){return(Et=Object(ue.a)(se.a.mark((function e(t,a,n){var r,c,i,o,s,u,l,d=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>3&&void 0!==d[3]?d[3]:1,c=[],i=new Map,o=Object(ie.a)(a),e.prev=4,o.s();case 6:if((s=o.n()).done){e.next=14;break}return u=s.value,e.next=10,Ct(t,u);case 10:l=e.sent,i.set(u.id,l);case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:e.t1=n,e.next=e.t1===ct.BEST?25:e.t1===ct.WORST?27:e.t1===ct.NEWEST?29:e.t1===ct.OLDEST?31:e.t1===ct.RANDOM?33:35;break;case 25:return c.sort((function(e,t){return i.get(t.id)-i.get(e.id).slice(0,r)})),e.abrupt("break",36);case 27:return c.sort((function(e,t){return i.get(e.id)-i.get(t.id)})).slice(0,r),e.abrupt("break",36);case 29:return c=a.sort((function(e,t){return e.started_at-t.started_at})).slice(0,r),e.abrupt("break",36);case 31:return c=a.sort((function(e,t){return t.started_at-e.started_at})).slice(0,r),e.abrupt("break",36);case 33:return c=P(a).slice(0,r),e.abrupt("break",36);case 35:throw new Error("Unknown CARD_MODIFIER: ".concat(n));case 36:return e.abrupt("return",c);case 37:case"end":return e.stop()}}),e,null,[[4,16,19,22]])})))).apply(this,arguments)}function Nt(e){var t=0,a=0;return e.forEach((function(e){t+=e.right,a+=e.wrong})),t/(t+a)}function Ct(e,t){return _t.apply(this,arguments)}function _t(){return(_t=Object(ue.a)(se.a.mark((function e(t,a){var n,r,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collections.get(pe.SESSIONS_CARDS),e.next=3,n.query(he.Q.where("session_id",a.id)).fetch();case 3:return r=e.sent,c=r.length,e.abrupt("return",r.map((function(e){return e.is_correct})).length/c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e){var t,a=[],n=new Set,r=Object(ie.a)(e);try{for(r.s();!(t=r.n()).done;){var c=t.value;n.has(c.id)||(a.push(c),n.add(c.id))}}catch(i){r.e(i)}finally{r.f()}return a}!function(e){e.BEST="best",e.WORST="worst",e.RANDOM="random",e.OLDEST="oldest",e.NEWEST="newest"}(ct||(ct={}));function Tt(e,t){var a={},n={};return e.create_decks.forEach((function(e){var t,a;(null===(t=e.deck)||void 0===t||null===(a=t.cards)||void 0===a?void 0:a.length)>0&&(n[e.name.toLowerCase()]=e.name)})),t.forEach((function(e){var t=n[e.toLowerCase()];t&&(a[t]=!0)})),Object.keys(a)}function At(e){var t,a=[],n=Object(ie.a)(e);try{for(n.s();!(t=n.n()).done;){var r,c=t.value,i=c.name,o=Object(ie.a)(c.deck.cards);try{for(o.s();!(r=o.n()).done;){var s=r.value,u={front:s.front,back:s.back,deckName:i};a.push(u)}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}return a}function zt(e,t,a,n){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(ue.a)(se.a.mark((function e(t,a,n,r){var c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(Q(a),n<a.length&&a.splice(n)),c=Q(c=At(a)),r&&(Q(c),n<c.length&&c.splice(n)),e.abrupt("return",{deckNames:t,cards:c});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(e,t,a){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(ue.a)(se.a.mark((function e(t,a,n){var r,c,i,o,s,u;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n.forEach((function(e){var t=e.deckName,a=e.front,n=e.back;r["".concat(t,":").concat(a,":").concat(n)]=!0})),c=[],e.next=5,st(t,a);case 5:i=e.sent,o=Object(ie.a)(i),e.prev=7,u=se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.value,e.next=3,t.cards.fetch();case 3:e.sent.forEach((function(e){var a=e.front,n=e.back,i=e.right,o=e.wrong,s=e.created_at;r["".concat(t.name,":").concat(a,":").concat(n)]&&c.push({deckName:t.name,front:a,back:n,right:i,wrong:o,createdAt:s})}));case 5:case"end":return e.stop()}}),e)})),o.s();case 10:if((s=o.n()).done){e.next=14;break}return e.delegateYield(u(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),o.e(e.t1);case 19:return e.prev=19,o.f(),e.finish(19);case 22:return e.abrupt("return",c);case 23:case"end":return e.stop()}}),e,null,[[7,16,19,22]])})))).apply(this,arguments)}function Pt(e,t,a,n,r,c){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(ue.a)(se.a.mark((function e(t,a,n,r,c,i){var o,s,u,l,d,f,p;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q(o=At(n)),i){e.next=7;break}if(!(c>=n.length)){e.next=5;break}return e.abrupt("return",{deckNames:a,cards:o});case 5:e.next=9;break;case 7:if(!(c>=o.length)){e.next=9;break}return e.abrupt("return",{deckNames:a,cards:o});case 9:if(!i){e.next=19;break}return e.next=12,It(t,a,o);case 12:switch(s=e.sent,r){case ct.BEST:s.sort((function(e,t){return-(e.right-e.wrong-(t.right-t.wrong))}));case ct.WORST:s.sort((function(e,t){return e.right-e.wrong-(t.right-t.wrong)}));case ct.OLDEST:s.sort((function(e,t){return e.createdAt-t.createdAt}));case ct.NEWEST:s.sort((function(e,t){return-(e.createdAt-t.createdAt)}))}return s.splice(c),Q(s),e.abrupt("return",{deckNames:a,cards:s});case 19:return e.next=21,st(t,a);case 21:return u=e.sent,e.next=24,St(u,r,c);case 24:return l=e.sent,d={},l.forEach((function(e){d[e.name]=!0})),f=n.filter((function(e){return d[e.name]})),Q(p=At(f)),e.abrupt("return",{deckNames:a,cards:p});case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(e,t,a,n,r){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(ue.a)(se.a.mark((function e(t,a,n,r,c){var i,o,s,u=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=u.length>5&&void 0!==u[5]?u[5]:5,o=Tt(a,n),s=a.create_decks.filter((function(e){return o.includes(e.name)})),r&&r!==ct.RANDOM){e.next=7;break}return e.abrupt("return",zt(o,s,i,c));case 7:return e.next=9,Pt(t,o,s,r,i,c);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(e,t,a,n,r,c){return qt.apply(this,arguments)}function qt(){return(qt=Object(ue.a)(se.a.mark((function e(t,a,n,r,c,i){var o,s;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.create_decks.filter((function(e){var t=e.tags&&e.tags.tags.map((function(e){return e.tagName})),a=!1;return t&&t.forEach((function(e){n.includes(e)&&(a=!0)})),a})),s=o.map((function(e){return e.name})),e.next=4,zt(s,o,i,c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(e,t,a){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(ue.a)(se.a.mark((function e(t,a,n){var r,c,i,o,s,u,l,d,f,p,h,m,b,k,g=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>3&&void 0!==g[3]?g[3]:5,!n){e.next=7;break}return e.next=4,bt(t);case 4:c=e.sent,e.next=19;break;case 7:if(!a){e.next=16;break}return e.next=10,bt(t);case 10:return c=e.sent,e.next=13,xt(t,c,a,r);case 13:c=e.sent,e.next=19;break;case 16:return e.next=18,gt(t,r);case 18:c=e.sent;case 19:i=[],o=Object(ie.a)(c),e.prev=21,o.s();case 23:if((s=o.n()).done){e.next=31;break}return u=s.value,e.next=27,u.cards;case 27:(l=e.sent).concat(l);case 29:e.next=23;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(21),o.e(e.t0);case 36:return e.prev=36,o.f(),e.finish(36);case 39:i=Dt(i),n&&i.length>r&&(i=a?yt(i,a,r):P(i).splice(r)),P(i),d=t.collections.get(pe.DECKS),f={},p=[],h=Object(ie.a)(i),e.prev=46,h.s();case 48:if((m=h.n()).done){e.next=58;break}if(b=m.value,f[b.deck_id]){e.next=54;break}return e.next=53,d.query(he.Q.where("id",he.Q.eq(b.deck_id))).fetch();case 53:f[b.deck_id]=e.sent[0].name;case 54:k=f[b.deck_id],p.push({deckName:k,front:b.front,back:b.back});case 56:e.next=48;break;case 58:e.next=63;break;case 60:e.prev=60,e.t1=e.catch(46),h.e(e.t1);case 63:return e.prev=63,h.f(),e.finish(63);case 66:return e.abrupt("return",{cards:p});case 67:case"end":return e.stop()}}),e,null,[[21,33,36,39],[46,60,63,66]])})))).apply(this,arguments)}function Wt(e,t){var a=e.create_decks.find((function(e){return e.name===t.deckName}));t.tags=a.tags&&a.tags.tags.map((function(e){return e&&e.tagName}))}function Gt(e,t,a){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(ue.a)(se.a.mark((function e(t,a,n){var r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt(t,a,n);case 2:return(r=e.sent).cards.forEach((function(e){return Wt(t,e)})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e,t,a){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(ue.a)(se.a.mark((function e(t,a,n){var r,c,i,o,s,u;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.subject,c=a.filter,i=a.isLimitAppliedToCards,o=a.limit,s=a.deckNames,u=a.tagNames,"decks"!==r){e.next=7;break}return e.next=4,Ft(n,t,s,c,i,o);case 4:return e.abrupt("return",e.sent);case 7:if("tags"!==r){e.next=13;break}return e.next=10,Qt(n,t,u,c,i,o);case 10:return e.abrupt("return",e.sent);case 13:if("sessions"!==r){e.next=19;break}return e.next=16,Bt(n,c,i,o);case 16:return e.abrupt("return",e.sent);case 19:throw new Error("Not supported!");case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ht=a(292),$t=a(300);function Xt(e){return r.a.createElement($t.a,Object.assign({elevation:6,variant:"filled"},e))}var Zt=Object(d.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function ea(e){var t=e.message,a=Zt(),n=r.a.useState({open:!0,vertical:"top",horizontal:"center"}),c=Object(o.a)(n,2),i=c[0],u=c[1],l=i.vertical,d=i.horizontal,f=i.open,p=function(){u(Object(s.a)({},i,{open:!1}))};return r.a.createElement("div",{className:a.root},r.a.createElement(Fe.a,{anchorOrigin:{vertical:l,horizontal:d},open:f,onClose:p},r.a.createElement(Xt,{onClose:p,severity:"error"},t)))}function ta(e,t,a){var n,r,c,i=localStorage.getItem("sessionData");if(i){(n=(r=JSON.parse(i)).cardDataArray)||(n=[]);var o="".concat(e.deckName,"_").concat(e.front,"_").concat(e.back),u={card_id:o,front:e.front,back:e.back,is_correct:a,card_index:t,deck:e.deckName,tags:e.tags},l=n.filter((function(e){return e.card_id===o}))[0],d=n.indexOf(l);l?n[d]=u:n.push(u),c=Object(s.a)({},r,{cardDataArray:n}),localStorage.setItem("sessionData",JSON.stringify(c))}}function aa(){return(aa=Object(ue.a)(se.a.mark((function e(t,a){var n,r,c,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.collections.get(pe.SESSIONS),r=a.collections.get(pe.CARDS),c=a.collections.get(pe.DECKS),i=a.collections.get(pe.SESSIONS_CARDS),e.next=6,a.action(Object(ue.a)(se.a.mark((function e(){var a,o,s,u,l;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,n.create((function(e){e.started_at=new Date(t.created_at),e.ended_at=new Date(t.ended_at)}));case 3:o=e.sent,s=Object(ie.a)(t.cardDataArray),e.prev=5,l=se.a.mark((function e(){var n,s,l,d,f;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(n=u.value).is_correct&&!1!==n.is_correct){e.next=21;break}if(a[n.deck]){e.next=6;break}return e.next=5,c.query(he.Q.where("name",he.Q.eq(n.deck))).fetch();case 5:a[n.deck]=e.sent[0];case 6:return s=a[n.deck].id,e.next=9,r.query(he.Q.where("deck_id",he.Q.eq(s)),he.Q.where("front",he.Q.eq(n.front)),he.Q.where("back",he.Q.eq(n.back))).fetch();case 9:if(0!==(l=e.sent).length){e.next=16;break}return f=a[n.deck],e.next=14,f.subAction(Object(ue.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.addCard(n.front,n.back);case 2:d=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 14:e.next=17;break;case 16:d=l[0];case 17:return e.next=19,d.update((function(e){n.is_correct?e.right++:e.wrong++,e.last_tested_at=new Date(t.ended_at)}));case 19:return e.next=21,i.create((function(e){e.card_id=d.id,e.session_id=o.id,e.is_correct=n.is_correct}));case 21:case"end":return e.stop()}}),e)})),s.s();case 8:if((u=s.n()).done){e.next=12;break}return e.delegateYield(l(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),s.e(e.t1);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,14,17,20]])}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e){var t,a,n=localStorage.getItem("sessionData");if(n&&(t=(a=JSON.parse(n)).ended_at),a&&!t){var r=Object(s.a)({},a,{ended_at:(new Date).toString()});!function(e,t){aa.apply(this,arguments)}(r,e);var c=JSON.stringify(r);localStorage.setItem("sessionData",c)}}function ra(e){var t=Object(ce.useDatabase)(),a=Object(n.useState)(""),c=Object(o.a)(a,2),i=c[0],u=c[1],l=Object(n.useState)(!1),d=Object(o.a)(l,2),f=d[0],p=d[1],h=Object(n.useState)(0),m=Object(o.a)(h,2),b=m[0],k=m[1],g=Object(n.useState)(null),v=Object(o.a)(g,2),O=v[0],w=v[1],y=Object(n.useState)(!0),S=Object(o.a)(y,2),j=S[0],x=S[1],E=Object(n.useState)(null),N=Object(o.a)(E,2),C=N[0],_=N[1];Object(n.useEffect)((function(){var a=function(e,t){var a=t.subject,n=t.deckNames,r=t.tagNames;if("decks"===a){if(!n)return{message:"Please select one or more of the decks on the card editor"};var c=e.create_decks.map((function(e){return e.name})),i=new Set;if(n.forEach((function(e){-1!==c.findIndex((function(t){return e.toLowerCase()===t.toLowerCase()}))&&i.add(e)})),0===i.size)return{message:"Please select one or more of the decks on the card editor"}}else if("tags"===a){if(0===r.length)return{message:"Please select one or more of the tags on the card editor"};var o=[];e.create_decks.forEach((function(e){e.tags&&e.tags.tags.forEach((function(e){return o.push(e.tagName)}))}));var s=!1;if(r.forEach((function(e){o.includes(e)||(s=!0)})),s)return{message:"Please select one or more of the tags on the card editor"}}return!1}(e.program,e.complexCommandParams);a?_(new Error(a.message)):function(){var a=Object(ue.a)(se.a.mark((function a(){var n,r,c,i;return se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Gt(e.program,e.complexCommandParams,t);case 3:R(n=a.sent),r=(new Date).toString(),c={created_at:r,session_id:r},i=JSON.stringify(c),localStorage.setItem("sessionData",i),w(n),x(!1),_(null),a.next=19;break;case 14:a.prev=14,a.t0=a.catch(0),R(a.t0),_(a.t0),x(!1);case 19:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(){return a.apply(this,arguments)}}()()}),[]),Object(n.useEffect)((function(){f&&(na(t),e.dispatch({type:xa.PostSession}))}),[f]);return C?r.a.createElement(ea,{message:C.message}):f||j?r.a.createElement(Ht.a,null):r.a.createElement(r.a.Fragment,null,!f&&r.a.createElement("div",{className:"session-container"},r.a.createElement("h1",null,"Session"),r.a.createElement("div",{className:"session-duration"},r.a.createElement("h3",{className:"duration"},"DURATION: "),r.a.createElement("br",null),r.a.createElement(ot.a,{initialTime:1e3},(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"timer"},r.a.createElement(ot.a.Minutes,null)," mins ",r.a.createElement(ot.a.Seconds,null)," secs"))})),function(){if(e.complexCommandParams.subject===Ne.Decks||e.complexCommandParams.subject===Ne.Tags)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"decks"},"DECKS: "),r.a.createElement("br",null),r.a.createElement("p",{className:"deckNames"},O.deckNames.map((function(e){return e===O.deckNames[O.deckNames.length-1]?r.a.createElement("span",{key:e},e," "):r.a.createElement("span",{key:e},e,", ")}))));if(e.complexCommandParams.subject===Ne.Sessions){var t,a=null===(t=e.complexCommandParams.limit)||void 0===t?void 0:t.toString();return a||(a="5"),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"decks"},"Past Sessions"),r.a.createElement("br",null),r.a.createElement("p",{className:"deckNames"},a))}}()),r.a.createElement(Ze,{cards:O.cards,dispatch:p,setNextCard:k,addCardDataToLocalStorage:ta,currentCard:O.cards[b],currentResult:i,setResult:u}),r.a.createElement(rt,{front:O.cards[b].front,back:O.cards[b].back}),r.a.createElement("div",{style:{textAlign:"center",marginTop:"3em"}},r.a.createElement("input",{alt:"correct",type:"image",src:"https://daranguyen.com/assets/correct_btn.svg",style:{width:"3em",marginRight:"4em"},onClick:function(){u("Correct!"),ta(Object(s.a)({},O.cards[b],{nextCardIndex:b}),b,!0)}}),r.a.createElement("input",{alt:"wrong",type:"image",src:"https://daranguyen.com/assets/wrong_btn.svg",style:{width:"3em"},onClick:function(){u("Try again!"),R(i),ta(Object(s.a)({},O.cards[b],{nextCardIndex:b}),b,!1)}})),r.a.createElement("h2",null,i)))}var ca,ia=a(294),oa=a(298),sa=a(297),ua=a(293),la=a(295),da=a(299),fa=a(296);!function(e){e[e.CARD_COLUMNS=0]="CARD_COLUMNS",e[e.SUMMARY_COLUMNS=1]="SUMMARY_COLUMNS",e[e.DECK_COLUMNS=2]="DECK_COLUMNS",e[e.SESSION_COLUMNS=3]="SESSION_COLUMNS"}(ca||(ca={}));var pa=Object(d.a)({root:{width:"100%"},container:{maxHeight:520}}),ha=[{id:"indexString",label:"",minWidth:20,align:"center"},{id:"front",label:"Front",minWidth:80,align:"center"},{id:"back",label:"Back",minWidth:80,align:"center"},{id:"score",label:"Score",minWidth:80,align:"center"},{id:"deck",label:"Deck",minWidth:80,align:"center"}],ma=[{id:"indexString",label:"",minWidth:20,align:"center"},{id:"front",label:"Front",minWidth:80,align:"center"},{id:"back",label:"Back",minWidth:80,align:"center"},{id:"results",label:"Results",minWidth:80,align:"center"},{id:"deck",label:"Deck",minWidth:80,align:"center"},{id:"tagsString",label:"Tags",minWidth:80,align:"center"}],ba=[{id:"indexString",label:"",minWidth:20,align:"center"},{id:"name",label:"Name",minWidth:20,align:"center"},{id:"count",label:"Card Count",minWidth:80,align:"center"},{id:"score",label:"Score",minWidth:80,align:"center"}],ka=[{id:"indexString",label:"",minWidth:20,align:"center"},{id:"dateString",label:"Date",minWidth:80,align:"center"},{id:"count",label:"Card Count",minWidth:80,align:"center"},{id:"score",label:"Score",minWidth:80,align:"center"},{id:"duration",label:"Time Spent",minWidth:80,align:"center"},{id:"decks",label:"Decks",minWidth:80,align:"center"}];function ga(e){var t=e.rows,a=e.columnType,n=pa(),c=r.a.useState(0),i=Object(o.a)(c,2),s=i[0],u=i[1],l=r.a.useState(10),d=Object(o.a)(l,2),f=d[0],p=d[1],h=null;switch(a){case ca.CARD_COLUMNS:h=ha;break;case ca.SUMMARY_COLUMNS:h=ma;break;case ca.DECK_COLUMNS:h=ba;break;case ca.SESSION_COLUMNS:h=ka}return r.a.createElement(x.a,{className:n.root},r.a.createElement(ua.a,{className:n.container},r.a.createElement(ia.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(la.a,null,r.a.createElement(fa.a,null,h.map((function(e){return r.a.createElement(sa.a,{key:e.id,align:"center",style:{minWidth:e.minWidth}},e.label)})))),r.a.createElement(oa.a,null,t.slice(s*f,s*f+f).map((function(e){return r.a.createElement(fa.a,{hover:!0,role:"checkbox",tabIndex:-1,key:"".concat(e.indexString,"_").concat(e.front)},h.map((function(t){var a=e[t.id];return r.a.createElement(sa.a,{key:t.id,align:"center"},a)})))}))))),r.a.createElement(da.a,{rowsPerPageOptions:[10,25,100],component:"div",count:t.length,rowsPerPage:f,page:s,onChangePage:function(e,t){u(t)},onChangeRowsPerPage:function(e){p(+e.target.value),u(0)}}))}a(214);var va,Oa=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"overViewTable"},r.a.createElement("tbody",{className:"overViewTable"},r.a.createElement("tr",{key:"statsOverviewHeading",className:"overViewTable"},function(e){return e&&Object.keys(e.overview).map((function(e){return r.a.createElement("td",{key:e,className:"overViewTable"},e)}))}(e)),r.a.createElement("tr",{key:"statsOverviewValues",className:"overViewTable"},function(e){return e&&Object.values(e.overview).map((function(e,t){return r.a.createElement("th",{key:"".concat(e.toString(),"_").concat(t),className:"overViewTable"},e)}))}(e)))))};function wa(e){var t={view:va.LOADING},a=Object(n.useState)(t),c=Object(o.a)(a,2),i=c[0],s=c[1],u=Object(ce.useDatabase)(),l=e.complexCommandParams,d=l.limit,f=l.filter,p=l.isLimitAppliedToCards,h=l.deckNames,m=l.subject;function b(){return k.apply(this,arguments)}function k(){return(k=Object(ue.a)(se.a.mark((function e(){var t,a,n,r,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,a=t.rows,n=t.highestScore,r=t.lowestScore,c=t.averageScore,e.abrupt("return",{overview:{"average score":c,"highest score":n,"lowest score":r},details:a,columnType:O()});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=Object(ue.a)(se.a.mark((function t(){var a,n,r,c,i,o,s,l,b,k,g,v,O,w,y,S,j,x,E,N,C,_,D,T,A,z,R;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],n=NaN,r=NaN,c=NaN,i=1,!p){t.next=53;break}if(m!==Ne.Decks){t.next=12;break}return t.next=9,ht(u,h);case 9:o=t.sent,t.next=19;break;case 12:if(m!==Ne.Sessions){t.next=18;break}return t.next=15,Ot(u,d);case 15:o=t.sent,t.next=19;break;case 18:throw new Error("Retrieving stats for cards from ".concat(m," is not supported"));case 19:s=yt(o,f,d),l=Object(ie.a)(s),t.prev=21,l.s();case 23:if((b=l.n()).done){t.next=43;break}return k=b.value,g=k.right/(k.wrong+k.right),n=isNaN(n)||g>n?g:n,r=isNaN(r)||g<r?g:r,t.t0=a,t.t1=M,t.t2=i,t.t3=k.front,t.t4=k.back,t.t5=k.right,t.t6=k.wrong,t.next=37,lt(u,k.deck_id);case 37:t.t7=t.sent,t.t8=(0,t.t1)(t.t2,t.t3,t.t4,t.t5,t.t6,t.t7),a=t.t0.concat.call(t.t0,t.t8),i+=1;case 41:t.next=23;break;case 43:t.next=48;break;case 45:t.prev=45,t.t9=t.catch(21),l.e(t.t9);case 48:return t.prev=48,l.f(),t.finish(48);case 51:t.next=121;break;case 53:if(m!==Ne.Decks){t.next=85;break}return t.next=56,st(u,h);case 56:return v=t.sent,t.next=59,St(v,f,d);case 59:O=t.sent,w=Object(ie.a)(O),t.prev=61,w.s();case 63:if((y=w.n()).done){t.next=75;break}return S=y.value,t.next=67,S.cards.fetch();case 67:j=t.sent,x=Nt(j),a=a.concat(F(i,S.name,j.length,x)),n=isNaN(n)||x>n?x:n,r=isNaN(r)||x<r?x:r,i+=1;case 73:t.next=63;break;case 75:t.next=80;break;case 77:t.prev=77,t.t10=t.catch(61),w.e(t.t10);case 80:return t.prev=80,w.f(),t.finish(80);case 83:t.next=121;break;case 85:if(m!==Ne.Sessions){t.next=120;break}return t.next=88,gt(u,d);case 88:return E=t.sent,t.next=91,xt(u,E,f,d);case 91:N=t.sent,C=Object(ie.a)(N),t.prev=93,C.s();case 95:if((_=C.n()).done){t.next=110;break}return D=_.value,t.next=99,ft(u,D);case 99:return T=t.sent,t.next=102,D.cards;case 102:A=t.sent,z=A.map((function(e){return e.is_correct})).length,R=z/A.length,n=isNaN(n)||R>n?R:n,r=isNaN(r)||R<r?R:r,a=a.concat(U(i,A.length,z,D.started_at,D.ended_at,T));case 108:t.next=95;break;case 110:t.next=115;break;case 112:t.prev=112,t.t11=t.catch(93),C.e(t.t11);case 115:return t.prev=115,C.f(),t.finish(115);case 118:t.next=121;break;case 120:throw new Error("Command not currently supported: "+e.complexCommandParams);case 121:return c=a.reduce((function(e,t){return e+t.score}),0)/(a.length||1),t.abrupt("return",{rows:a,highestScore:n,lowestScore:r,averageScore:c});case 123:case"end":return t.stop()}}),t,null,[[21,45,48,51],[61,77,80,83],[93,112,115,118]])})))).apply(this,arguments)}function O(){if(p)return ca.CARD_COLUMNS;switch(m){case Ne.Decks:return ca.DECK_COLUMNS;case Ne.Sessions:return ca.SESSION_COLUMNS;case Ne.Tags:return ca.DECK_COLUMNS}}return Object(n.useEffect)((function(){(function(){var e=Object(ue.a)(se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:t=e.sent,s({view:va.READY,statsObject:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({view:va.ERROR,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[e.complexCommandParams]),i.view===va.LOADING?r.a.createElement(Ht.a,{style:{margin:"auto"}}):i.view===va.ERROR?(console.log(i.error),r.a.createElement("h1",{style:{margin:"auto"}},"Something went wrong when trying to fetch the stats")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"right-side-container"},r.a.createElement("h1",null," Statistics"),r.a.createElement(Oa,{overview:i.statsObject.overview}),r.a.createElement(ga,{rows:i.statsObject.details,columnType:i.statsObject.columnType})))}function ya(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"session-container",style:{textAlign:"center"}},r.a.createElement("h1",null,"Deck: ",e.name),e.deck.deck.cards.map((function(e){return r.a.createElement(rt,{front:e.front,back:e.back})}))))}!function(e){e[e.LOADING=0]="LOADING",e[e.READY=1]="READY",e[e.ERROR=2]="ERROR"}(va||(va={}));function Sa(){var e=function(){var e=localStorage.getItem("sessionData"),t=e&&JSON.parse(e),a=t.ended_at,n=t.created_at,r=new Date(a),c=new Date(n),i=r.getTime()-c.getTime(),o=Math.floor(i/6e4),s=(i%6e4/1e3).toFixed(0);return{overview:{"total time":"".concat(o," min ").concat(s," sec")},details:t.cardDataArray&&t.cardDataArray.map((function(e){return function(e,t,a,n,r,c){var i,o;return i=void 0===n?"skipped":n?"correct":"incorrect",o=c&&c.length>0?c.join(", "):"none",{indexString:e.toString()+".)",front:t,back:a,results:i,deck:r,tagsString:o}}(e.card_index+1,e.front,e.back,e.is_correct,e.deck,e.tags)}))||[]}}(),t=function(e){var t=e.reduce((function(e,t){return e+(t&&"correct"===t.results?1:0)}),0),a=e.length;return[[t&&t.toString(),a&&a.toString()].join("/"),t===a&&0!==a]}(e.details),a=Object(o.a)(t,2),n=a[0],c=a[1];return r.a.createElement("div",{className:"right-side-container"},r.a.createElement("h1",null,"Summary"),r.a.createElement("br",null),r.a.createElement("h2",null,"You got: ",n," cards correct"),c&&r.a.createElement("h2",null,"Good job!!"),c&&r.a.createElement("img",{className:"confetti",src:"https://daranguyen.com/assets/confetti_emoji.png",alt:"Confetti"}),r.a.createElement("br",null),r.a.createElement("h3",null,"Time spent: ",e.overview["total time"]),r.a.createElement("br",null),r.a.createElement(ga,{rows:e.details,columnType:ca.SUMMARY_COLUMNS}))}var ja,xa,Ea=function(e){var t=e.program,a=e.dispatch;return r.a.createElement("div",{className:"card-view-container"},r.a.createElement("div",{className:"card-view"},r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",justifyItems:"center"}},r.a.createElement(N,{deckNames:t.create_decks.map((function(e){return e.name})),dispatch:a}))))};!function(e){e[e.DECK=0]="DECK",e[e.STATS=1]="STATS",e[e.SESSION=2]="SESSION",e[e.POST_SESSION=3]="POST_SESSION",e[e.LIST=4]="LIST",e[e.DECK_DETAIL=5]="DECK_DETAIL",e[e.ERROR=6]="ERROR",e[e.LOADING=7]="LOADING"}(ja||(ja={})),function(e){e.SetCardEditor="set card editor",e.CardEditorParseSuccess="card editor parse success",e.StartSession="start session",e.PostSession="post session",e.List="list",e.ViewDeckDetail="view deck detail",e.ShowStats="show stats",e.LoadDecks="load decks",e.CommandNotFound="command not found",e.QuitToHome="quit to home"}(xa||(xa={}));var Na=function(e,t){switch(R("Dispatched to App: ",t),t.type){case"set card editor":return Object(s.a)({},e,{cardEditor:t.cardEditor});case"card editor parse success":return Object(s.a)({},e,{program:t.program,view:ja.DECK});case"start session":return console.log("Start session action received"),Object(s.a)({},e,{complexCommandParams:{limit:t.limit,filter:t.filter,isLimitAppliedToCards:t.isLimitAppliedToCards,deckNames:t.deckNames,subject:t.subject,tagNames:t.tagNames},view:ja.SESSION});case"show stats":return Object(s.a)({},e,{view:ja.STATS,complexCommandParams:{limit:t.limit,filter:t.filter,isLimitAppliedToCards:t.isLimitAppliedToCards,deckNames:t.deckNames,subject:t.subject}});case"list":return Object(s.a)({},e,{view:ja.LIST});case"post session":return Object(s.a)({},e,{view:ja.POST_SESSION});case"quit to home":return Object(s.a)({},e,{view:ja.DECK});case"view deck detail":return Object(s.a)({},e,{view:ja.DECK_DETAIL,deckToViewDetail:t.deckName});case"load decks":return e.cardEditor.getDoc().setValue(t.createDSLValue),e;case"command not found":return Object(s.a)({},e,{view:ja.ERROR})}return R("Unexpected end of reducer dispatch!"),e};function Ca(){var e=function(){var e=localStorage.getItem("cardEditorStrKey"),t=localStorage.getItem("programAST");if(e)return{isFirstTimeUser:!1,initialText:e,initialProgram:JSON.parse(t)};B.makeTokenizer(je,ae);var a=new Z;return a.parse(),localStorage.setItem("cardEditorStrKey",je),localStorage.setItem("programAST",JSON.stringify(a)),{isFirstTimeUser:!0,initialText:je,initialProgram:a}}(),t=e.isFirstTimeUser,a=e.initialText,c=e.initialProgram,i=Object(ce.useDatabase)();t&&we(c,i);var s={view:ja.DECK,program:c,cardEditor:void 0,deckToViewDetail:void 0,subjectToList:void 0,complexCommandParams:{limit:void 0,filter:void 0,isLimitAppliedToCards:void 0,deckNames:void 0,subject:Ne.Undefined}},l=Object(n.useReducer)(Na,s),d=Object(o.a)(l,2),f=d[0],p=f.view,h=f.program,m=f.deckToViewDetail,b=f.complexCommandParams,k=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar"},r.a.createElement(u,null)),r.a.createElement("div",{className:"container",style:{backgroundColor:"#FAFAFA"}},r.a.createElement(Ee,{dispatch:k,program:h,initialText:a,isInSession:p===ja.SESSION}),r.a.createElement(Ke,{dispatch:k}),function(e){switch(e!==ja.SESSION&&e!==ja.POST_SESSION&&localStorage.removeItem("sessionData"),e){case ja.DECK:return r.a.createElement(C,{program:h,dispatch:k});case ja.POST_SESSION:return r.a.createElement(Sa,null);case ja.LIST:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea,{program:h,dispatch:k}));case ja.SESSION:return r.a.createElement(ra,{dispatch:k,complexCommandParams:b,program:h});case ja.STATS:return r.a.createElement(wa,{complexCommandParams:b});case ja.DECK_DETAIL:return console.log(m),r.a.createElement(ya,{name:m,deck:h.create_decks.filter((function(e){return e.name===m}))[0]});case ja.ERROR:return r.a.createElement(ea,{message:"Command not found. Type 'Help'"});case ja.LOADING:return r.a.createElement(Ht.a,{style:{margin:"auto"}})}}(p)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _a=a(140),Da=a.n(_a),Ta=a(76),Aa=a.n(Ta);function za(e,t,a){return{name:e,type:t,isIndexed:a}}var Ra,Ia,La,Pa,Ma,Fa,Ua,Qa,qa,Ba,Ka,Wa,Ga,Va,Ya,Ja,Ha,$a,Xa,Za,en,tn,an,nn,rn,cn,on,sn,un,ln,dn,fn,pn,hn,mn,bn,kn,gn,vn,On,wn,yn,Sn,jn,xn,En,Nn,Cn,_n,Dn,Tn,An,zn,Rn,In,Ln,Pn,Mn,Fn,Un,Qn,qn=Object(he.appSchema)({version:1,tables:[Object(he.tableSchema)({name:pe.DECKS,columns:[za("name","string"),za("created_at","number")]}),Object(he.tableSchema)({name:pe.CARDS,columns:[za("created_at","number"),za("updated_at","number"),za("last_tested_at","number"),za("deck_id","string",!0),za("front","string",!0),za("back","string",!0),za("wrong","number"),za("right","number")]}),Object(he.tableSchema)({name:pe.SESSIONS,columns:[za("started_at","number"),za("ended_at","number")]}),Object(he.tableSchema)({name:pe.SESSIONS_CARDS,columns:[za("session_id","string",!0),za("card_id","string",!0),za("is_correct","boolean")]}),Object(he.tableSchema)({name:pe.TAGS,columns:[za("name","string",!0)]}),Object(he.tableSchema)({name:pe.TAGS_CARDS,columns:[za("tag_id","string",!0),za("card_id","string",!0)]})]}),Bn=a(23),Kn=a(16),Wn=a(20),Gn=(a(51),a(21)),Vn=(Ra=Object(Gn.date)("created_at"),Ia=Object(Gn.date)("updated_at"),La=Object(Gn.date)("last_tested_at"),Pa=Object(Gn.field)("deck_id"),Ma=Object(Gn.field)("front"),Fa=Object(Gn.field)("back"),Ua=Object(Gn.field)("wrong"),Qa=Object(Gn.field)("right"),Xa=$a=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(Bn.a)(e,"created_at",Ba,Object(Kn.a)(e)),Object(Bn.a)(e,"updated_at",Ka,Object(Kn.a)(e)),Object(Bn.a)(e,"last_tested_at",Wa,Object(Kn.a)(e)),Object(Bn.a)(e,"deck_id",Ga,Object(Kn.a)(e)),Object(Bn.a)(e,"front",Va,Object(Kn.a)(e)),Object(Bn.a)(e,"back",Ya,Object(Kn.a)(e)),Object(Bn.a)(e,"wrong",Ja,Object(Kn.a)(e)),Object(Bn.a)(e,"right",Ha,Object(Kn.a)(e)),e}return a}(he.Model),$a.table=pe.CARDS,$a.associations=(Za={},Object(l.a)(Za,pe.DECKS,{type:"belongs_to",key:"deck_id"}),Object(l.a)(Za,pe.TAGS_CARDS,{type:"has_many",foreignKey:"card_id"}),Object(l.a)(Za,pe.SESSIONS_CARDS,{type:"has_many",foreignKey:"card_id"}),Za),qa=Xa,Ba=Object(Wn.a)(qa.prototype,"created_at",[Ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ka=Object(Wn.a)(qa.prototype,"updated_at",[Ia],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wa=Object(Wn.a)(qa.prototype,"last_tested_at",[La],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ga=Object(Wn.a)(qa.prototype,"deck_id",[Pa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Va=Object(Wn.a)(qa.prototype,"front",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ya=Object(Wn.a)(qa.prototype,"back",[Fa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ja=Object(Wn.a)(qa.prototype,"wrong",[Ua],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ha=Object(Wn.a)(qa.prototype,"right",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qa),Yn=(en=Object(Gn.field)("name"),tn=Object(Gn.date)("created_at"),an=Object(Gn.children)(pe.CARDS),un=sn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(Bn.a)(e,"name",rn,Object(Kn.a)(e)),Object(Bn.a)(e,"created_at",cn,Object(Kn.a)(e)),Object(Bn.a)(e,"cards",on,Object(Kn.a)(e)),e}return Object(T.a)(a,[{key:"addCard",value:function(){var e=Object(ue.a)(se.a.mark((function e(t,a){var n=this;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collections.get(pe.CARDS).create((function(e){e.deck_id=n.id,e.front=t,e.back=a}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(he.Model),sn.table=pe.DECKS,sn.associations=Object(l.a)({},pe.CARDS,{type:"has_many",foreignKey:"deck_id"}),nn=un,rn=Object(Wn.a)(nn.prototype,"name",[en],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn=Object(Wn.a)(nn.prototype,"created_at",[tn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=Object(Wn.a)(nn.prototype,"cards",[an],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(Wn.a)(nn.prototype,"addCard",[Gn.action],Object.getOwnPropertyDescriptor(nn.prototype,"addCard"),nn.prototype),nn),Jn=(ln=Object(Gn.date)("started_at"),dn=Object(Gn.date)("ended_at"),kn=bn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(Bn.a)(e,"started_at",pn,Object(Kn.a)(e)),Object(Bn.a)(e,"ended_at",hn,Object(Kn.a)(e)),Object(Bn.a)(e,"cards",mn,Object(Kn.a)(e)),e}return a}(he.Model),bn.table=pe.SESSIONS,bn.associations=Object(l.a)({},pe.SESSIONS_CARDS,{type:"has_many",foreignKey:"session_id"}),fn=kn,pn=Object(Wn.a)(fn.prototype,"started_at",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hn=Object(Wn.a)(fn.prototype,"ended_at",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn=Object(Wn.a)(fn.prototype,"cards",[Gn.lazy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.collections.get(pe.CARDS).query(he.Q.on(pe.SESSIONS_CARDS,"session_id",this.id)).fetch()}}),fn),Hn=(gn=Object(Gn.field)("session_id"),vn=Object(Gn.field)("card_id"),On=Object(Gn.field)("is_correct"),En=xn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(Bn.a)(e,"session_id",yn,Object(Kn.a)(e)),Object(Bn.a)(e,"card_id",Sn,Object(Kn.a)(e)),Object(Bn.a)(e,"is_correct",jn,Object(Kn.a)(e)),e}return a}(he.Model),xn.table=pe.SESSIONS_CARDS,xn.associations=(Nn={},Object(l.a)(Nn,pe.SESSIONS,{type:"belongs_to",key:"session_id"}),Object(l.a)(Nn,pe.CARDS,{type:"belongs_to",key:"card_id"}),Nn),wn=En,yn=Object(Wn.a)(wn.prototype,"session_id",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn=Object(Wn.a)(wn.prototype,"card_id",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jn=Object(Wn.a)(wn.prototype,"is_correct",[On],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wn),$n=(Cn=Object(Gn.field)("name"),zn=An=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(Bn.a)(e,"name",Dn,Object(Kn.a)(e)),Object(Bn.a)(e,"cards",Tn,Object(Kn.a)(e)),e}return a}(he.Model),An.table=pe.TAGS,An.associations=Object(l.a)({},pe.TAGS_CARDS,{type:"has_many",foreignKey:"tag_id"}),_n=zn,Dn=Object(Wn.a)(_n.prototype,"name",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tn=Object(Wn.a)(_n.prototype,"cards",[Gn.lazy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.collections.get(pe.CARDS).query(he.Q.on(pe.TAGS_CARDS,"tag_id",this.id)).fetch()}}),_n),Xn=(Rn=Object(Gn.field)("tag_id"),In=Object(Gn.field)("card_id"),Un=Fn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(Bn.a)(e,"tag_id",Pn,Object(Kn.a)(e)),Object(Bn.a)(e,"card_id",Mn,Object(Kn.a)(e)),e}return a}(he.Model),Fn.table=pe.TAGS_CARDS,Fn.associations=(Qn={},Object(l.a)(Qn,pe.TAGS,{type:"belongs_to",key:"tag_id"}),Object(l.a)(Qn,pe.CARDS,{type:"belongs_to",key:"card_id"}),Qn),Ln=Un,Pn=Object(Wn.a)(Ln.prototype,"tag_id",[Rn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mn=Object(Wn.a)(Ln.prototype,"card_id",[In],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln),Zn=new Da.a({schema:qn,useWebWorker:!1,useIncrementalIndexedDB:!0}),er=new he.Database({adapter:Zn,modelClasses:[Vn,Yn,Jn,Hn,$n,Xn],actionsEnabled:!0});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Aa.a,{database:er},r.a.createElement(Ca,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[149,1,2]]]);
//# sourceMappingURL=main.aaed96ca.chunk.js.map