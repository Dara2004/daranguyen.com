(this.webpackJsonpgoi=this.webpackJsonpgoi||[]).push([[0],{156:function(e,t,a){e.exports=a(244)},161:function(e,t,a){},162:function(e,t,a){},221:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),i=a.n(c),o=(a(161),a(15)),s=a(30);a(162);function u(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement("h1",null,"Goi")))}var l=a(25),d=a(286),f=a(308),p=a(4),h=a(289),m=a(291),b=a(292),k=a(293),g=a(295),v=a(294),O=a(86),w=a(141),y=a.n(w),j=Object(d.a)((function(e){return Object(f.a)({root:{},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:"red"}})}));function x(e){var t=j(),a=r.a.useState(!1),n=Object(o.a)(a,2),c=n[0],i=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{style:{marginTop:"2em",width:"23em",display:"flex",flexDirection:"column"},className:t.root},r.a.createElement(m.a,{title:""}),r.a.createElement(b.a,null,r.a.createElement("div",{style:{height:"3em",marginTop:"3em"}},r.a.createElement(O.a,{paragraph:!0,style:{}},e.front))),r.a.createElement(k.a,{disableSpacing:!0},r.a.createElement(v.a,{className:Object(p.a)(t.expand,Object(l.a)({},t.expandOpen,c)),onClick:function(){i(!c)},"aria-expanded":c,"aria-label":"show more"},r.a.createElement(y.a,null))),r.a.createElement(g.a,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement(b.a,{style:{marginTop:"4em"}},r.a.createElement("div",{style:{height:"5em",alignItems:"center"}},r.a.createElement(O.a,{paragraph:!0},e.back))))))}var S=a(245);function E(e){return r.a.createElement(S.a,{style:{margin:"2em",width:"20vw",height:"12vw",justifyItems:"center",display:"flex",fontSize:"1.5em"},onClick:function(){console.log(e.name),e.dispatch({type:"view deck detail",deckName:e.name})}},r.a.createElement("div",{style:{margin:"auto"}},e.name))}function N(e){return r.a.createElement(r.a.Fragment,null,e.deckNames.map((function(t,a){return r.a.createElement(E,{key:a,name:t,dispatch:e.dispatch})})))}function C(e){var t,a=e.program,n=e.dispatch,c=null===a||void 0===a||null===(t=a.create_decks)||void 0===t?void 0:t.map((function(e){return e.deck}));if(!c||0===c.length)return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"You have no deck! \ud83d\ude40 Enter something in the editor!"));var i=c[c.length-1],o=i.cards[i.cards.length-1],s=o.front,u=o.back;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-view-container"},r.a.createElement("div",{className:"card-view"},r.a.createElement("h1",{style:{color:"#333333"}},"Deck: ",a.create_decks[a.create_decks.length-1].name),r.a.createElement(x,{front:s,back:u}),r.a.createElement("div",{style:{marginTop:"2em",display:"grid",gridTemplateColumns:"1fr 1fr"}},r.a.createElement(N,{deckNames:a.create_decks.map((function(e){return e.name})),dispatch:n})))))}a(106),a(167),a(168);var _=a(81),D=a(8),T=a(13),A=a(11),z=a(12);function R(){var e;L()&&(e=console).log.apply(e,arguments)}function I(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];R.apply(void 0,["\ud83c\udf49 "].concat(t))}function L(){return"on"==="on".toLowerCase()}function U(e){return e.sort((function(){return Math.random()-.5}))}function P(e,t,a,n,r,c){var i=n.toString()+"/"+(r+n).toString();return{indexString:e.toString()+".)",front:t,back:a,score:i,deck:c}}function F(e,t,a,n){return{indexString:e.toString()+".)",name:t,count:a,score:n}}function M(e,t,a,n,r,c){var i=a.toString()+"/"+t.toString(),o=c.join(", "),s=(r-n)/1e3;return{indexString:e.toString()+".)",dateString:new Date(n).toLocaleDateString("en-US",{year:"2-digit",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}),count:t,score:i,duration:s,decksString:o}}function Q(e){for(var t=e,a=t.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),r=t[a];t[a]=t[n],t[n]=r}return t}var q=function(){function e(t,a){Object(D.a)(this,e),this.tokens=void 0,this.currentToken=void 0,e.program=t,e.literals=a,this.tokens=[],this.currentToken=0,this.tokenize()}return Object(T.a)(e,[{key:"tokenize",value:function(){var t=e.program;t=t.replace(/\n/g,"_"),R(e.program),e.literals.forEach((function(e){R("string: ",e);var a=new RegExp(e,"ig");R("regexp: ",a),R(t=t.replace(a,"_".concat(e,"_")))})),R(t=t.replace(/__/g,"_"));var a=t.split("_").slice(1);this.tokens=a.map((function(e){return e.trim()})).filter((function(e){return""!==e})),R(this.tokens)}},{key:"checkNext",value:function(){return this.currentToken<this.tokens.length?this.tokens[this.currentToken]:"NO_MORE_TOKENS"}},{key:"getNext",value:function(){var e="";return this.currentToken<this.tokens.length?(e=this.tokens[this.currentToken],this.currentToken++):e="NULLTOKEN",e}},{key:"checkToken",value:function(e){var t=this.checkNext(),a=new RegExp(e);return R("comparing: |".concat(t,"|  to  |").concat(e,"|")),!!t.match(a)}},{key:"getAndCheckToken",value:function(e){var t=this.getNext(),a=new RegExp(e);if(!t.match(a))throw Error("Unexpected next token for Parsing! Expected something matching: ".concat(e," but got: ").concat(t));return R("matched: ".concat(t,"  to  ").concat(e)),t}},{key:"moreTokens",value:function(){return this.currentToken<this.tokens.length}}],[{key:"makeTokenizer",value:function(t,a){this.theTokenizer=new e(t,a)}},{key:"getTokenizer",value:function(){return this.theTokenizer}}]),e}();q.program=void 0,q.literals=void 0,q.theTokenizer=void 0;var B=q,K=function(){function e(){Object(D.a)(this,e),this.tokenizer=B.getTokenizer()}return Object(T.a)(e,[{key:"parse",value:function(){throw new Error("parse not implemented")}},{key:"evaluate",value:function(){throw new Error("evaluate not implemented")}}]),e}(),W=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).cardNumber=0,e.front="",e.back="",e}return Object(T.a)(a,[{key:"parse",value:function(){if(this.tokenizer.getAndCheckToken("\\("),!this.tokenizer.checkToken("^[1-9]+[0-9]*$"))throw new Error("Card number incorrect in Card");this.cardNumber=parseInt(this.tokenizer.getNext()),this.tokenizer.getAndCheckToken("\\)"),this.front=this.tokenizer.getNext(),this.tokenizer.getAndCheckToken(":"),this.back=this.tokenizer.getNext()}}]),a}(K),G=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).cards=[],e}return Object(T.a)(a,[{key:"parse",value:function(){for(;this.tokenizer.moreTokens()&&!this.tokenizer.checkToken("add color")&&!this.tokenizer.checkToken("add direction")&&!this.tokenizer.checkToken("add alignment")&&!this.tokenizer.checkToken("add tags")&&!this.tokenizer.checkToken("create deck");){var e=new W;e.parse(),this.cards.push(e)}}}]),a}(K),V=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).tagName="",e}return Object(T.a)(a,[{key:"parse",value:function(){this.tagName=this.tokenizer.getNext()}}]),a}(K),Y=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).tags=[],e.type="tags",e}return Object(T.a)(a,[{key:"parseInteractivePrompt",value:function(){for(this.tokenizer.getAndCheckToken("tags:");this.tokenizer.moreTokens();){var e=new V;e.parse(),this.tags.push(e),","===this.tokenizer.checkNext()&&this.tokenizer.getNext()}}},{key:"parse",value:function(){for("add tags"===this.tokenizer.checkNext().toLowerCase()&&this.tokenizer.getNext(),this.tokenizer.getAndCheckToken(":");this.tokenizer.moreTokens()&&!this.tokenizer.checkToken("add color")&&!this.tokenizer.checkToken("add direction")&&!this.tokenizer.checkToken("add alignment")&&!this.tokenizer.checkToken("\\(");){","===this.tokenizer.checkNext()&&this.tokenizer.getNext();var e=new V;e.parse(),this.tags.push(e)}}}]),a}(K),J=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).attribute={attributeType:"",value:""},e}return Object(T.a)(a,[{key:"parse",value:function(){var e=this.tokenizer.getNext().toLowerCase();switch(this.tokenizer.getAndCheckToken(":"),e){case"add alignment":if(this.attribute.attributeType="alignment",!this.tokenizer.checkToken("center|right|left"))throw new Error("Alignment Attribute is not valid");this.attribute.value=this.tokenizer.getNext();break;case"add direction":if(this.attribute.attributeType="direction",!this.tokenizer.checkToken("horizontal|vertical"))throw new Error("Direction Attribute is not valid");this.attribute.value=this.tokenizer.getNext();break;case"add color":if(this.attribute.attributeType="color",!this.tokenizer.checkToken("red|blue|yellow|purple|green|grey|brown"))throw new Error("Color Attribute is not valid");this.attribute.value=this.tokenizer.getNext();break;default:return}}}]),a}(K);function H(){var e=B.getTokenizer().checkNext().toLowerCase();return"add color"===e||"add alignment"===e||"add direction"===e}var $=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).attributes=[],e}return Object(T.a)(a,[{key:"parse",value:function(){if(H())for(;this.tokenizer.moreTokens()&&!this.tokenizer.checkToken("add tags")&&!this.tokenizer.checkToken("\\(");){var e=new J;e.parse(),this.attributes.push(e)}}}]),a}(K),X=[":","(",")",",","NULLTOKEN"],Z=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).tags=null,e.attributes=null,e.deck=null,e.name="",e}return Object(T.a)(a,[{key:"checkForAndParseTags",value:function(){"add tags"===this.tokenizer.checkNext().toLowerCase()&&(this.tags=new Y,this.tags.parse())}},{key:"checkForAndParseAttributes",value:function(){H()&&(this.attributes=new $,this.attributes.parse())}},{key:"checkForAndParseDeck",value:function(){this.tokenizer.checkToken("\\(")&&(this.deck=new G,this.deck.parse())}},{key:"parse",value:function(){this.tokenizer.getAndCheckToken("create deck");var e=this.tokenizer.getNext();if(X.includes(e))throw new Error("invalid deck name");this.name=e,this.tokenizer.getAndCheckToken(":");for(var t=!0;this.tokenizer.moreTokens()&&t;)this.checkForAndParseTags(),this.checkForAndParseAttributes(),t=H()||"add tags"===this.tokenizer.checkNext().toLowerCase();this.tokenizer.moreTokens()&&this.checkForAndParseDeck()}}]),a}(K),ee=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).create_decks=[],e}return Object(T.a)(a,[{key:"parse",value:function(){for(;this.tokenizer.moreTokens()&&this.tokenizer.checkToken("create deck");){var e=new Z;e.parse(),this.create_decks.push(e)}}}]),a}(K),te=["best","worst","random","oldest","newest"],ae=[].concat(te,["show stats for","start session from","help","list","export decks","load decks","quit","back to home",",","cards from"],["decks:","tags:","past sessions"]),ne=["create deck",":","\\(","\\)",","];function re(e,t,a){var n=e.getDoc();(function(e,t){var a=(e=e.toLowerCase()).split("\n"),n=[];return a.forEach((function(e,a){t.forEach((function(t){var r=e.indexOf(t);-1!==r&&n.push({lineNumber:a,charStart:r,charEnd:r+t.length})}))})),n})(n.getValue(),t).forEach((function(e){n.markText({line:e.lineNumber,ch:e.charStart},{line:e.lineNumber,ch:e.charEnd},{className:a||"syntax-highlight"})}))}var ce,ie=a(40),oe=a(21),se=a(5),ue=a.n(se),le=a(9);function de(e,t){var a,n,r=null===(a=e.deck)||void 0===a?void 0:a.cards,c=null===(n=t.deck)||void 0===n?void 0:n.cards;return null==r?{type:ce.CopyPasteSingleDeck,deckName:t.name}:null==c||r.length>c.length?{type:ce.Delete}:c.length===r.length+1?function(e,t,a){for(var n=[],r=0;r<e.length;++r){var c=e[r],i=c.front,o=c.back,s=t[r];s.front===i&&s.back===o||n.push(s)}if(0===n.length){var u=t[t.length-1],l=u.front,d=u.back;return{type:ce.CreateCard,deckName:a,front:l,back:d}}if(1===n.length){var f=n[0],p=f.front,h=f.back;return{type:ce.CreateCard,deckName:a,front:p,back:h}}return{type:ce.CopyPasteSingleDeck,deckName:a}}(r,c,e.name):{type:ce.CopyPasteSingleDeck,deckName:t.name}}function fe(e,t){var a=function(e,t){var a=0,n=void 0;return e.forEach((function(e,r){var c,i,o,s,u=t[r];(null===(c=e.deck)||void 0===c||null===(i=c.cards)||void 0===i?void 0:i.length)!==(null===(o=u.deck)||void 0===o||null===(s=o.cards)||void 0===s?void 0:s.length)&&1===++a&&(n=r)})),{numDifferences:a,firstDifference:n}}(e,t),n=a.numDifferences,r=a.firstDifference;return n>1?{type:ce.CopyPasteMultiDecks}:1===n?de(e[r],t[r]):function(e,t){for(var a=void 0,n=0;n<e.length;++n){var r,c,i=null===(r=e[n].deck)||void 0===r?void 0:r.cards,o=null===(c=t[n].deck)||void 0===c?void 0:c.cards;if(i&&o)for(var s=0;s<i.length;++s)if(i[s].front!==o[s].front||i[s].back!==o[s].back)if(i[s].front===o[s].front&&i[s].back!==o[s].back){if(a)return{type:ce.CopyPasteMultiDecks};a={type:ce.UpdateCardBack,deckName:e[n].name,front:i[s].front,oldBack:i[s].back,newBack:o[s].back}}else{if(i[s].front===o[s].front||i[s].back!==o[s].back)return{type:ce.CopyPasteMultiDecks};if(a)return{type:ce.CopyPasteMultiDecks};a={type:ce.UpdateCardFront,deckName:e[n].name,oldFront:i[s].front,newFront:o[s].front,back:i[s].back}}}return a||{type:ce.Nothing}}(e,t)}function pe(e,t){var a=e.create_decks,n=t.create_decks;if(a.length>n.length)return{type:ce.Delete};if(a.length<n.length)return a.length===n.length-1?function(e,t){var a={};e.forEach((function(e){a[e.name]=!0}));var n=[];if(t.forEach((function(e,t){a[e.name]||n.push({name:e.name,idx:t})})),1===n.length){var r,c=n[0],i=c.name;return(null===(r=t[c.idx].deck.cards)||void 0===r?void 0:r.length)>1?{type:ce.CopyPasteSingleDeck,deckName:i}:{type:ce.CreateDeck,deckName:i}}return{type:ce.CopyPasteMultiDecks}}(a,n):{type:ce.CopyPasteMultiDecks};var r,c=(r=n,a.reduce((function(e,t,a){return t.name!==r[a].name?e+1:e}),0));return c>1?{type:ce.CopyPasteMultiDecks}:1===c?function(e,t){for(var a=0;a<e.length&&e[a].name===t[a].name;)++a;var n=e[a],r=t[a];return function(e,t){var a,n,r,c,i,o;if((null===(a=e.deck)||void 0===a||null===(n=a.cards)||void 0===n?void 0:n.length)!==(null===(r=t.deck)||void 0===r||null===(c=r.cards)||void 0===c?void 0:c.length))return!1;if(null==(null===(i=e.deck)||void 0===i?void 0:i.cards)||null==(null===(o=t.deck)||void 0===o?void 0:o.cards))return!1;var s=e.deck.cards,u=t.deck.cards;return!s.find((function(e,t){var a=u[t];return e.cardNumber!==a.cardNumber||e.front!==a.front||e.back!==a.back}))}(n,r)?{type:ce.UpdateDeckName,oldDeckName:n.name,newDeckName:r.name}:{type:ce.CopyPasteSingleDeck,deckName:r.name}}(a,n):fe(a,n)}!function(e){e.CreateDeck="create deck",e.CreateCard="create card",e.UpdateDeckName="update deck name",e.UpdateCardFront="update card front",e.UpdateCardBack="update card back",e.CopyPasteMultiDecks="copy paste multi decks",e.CopyPasteSingleDeck="copy paste single deck",e.Delete="deleted something",e.Nothing="nothing"}(ce||(ce={}));var he,me=a(6);function be(e,t,a){return ke.apply(this,arguments)}function ke(){return(ke=Object(le.a)(ue.a.mark((function e(t,a,n){var r;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("Attempting to update deck name ".concat(t," -> ").concat(a)),e.prev=1,r=n.collections.get(he.DECKS),e.next=5,n.action(Object(le.a)(ue.a.mark((function e(){var n,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.query(me.Q.where("name",me.Q.eq(t))).fetch();case 2:if(1!==(n=e.sent).length){e.next=10;break}return c=n[0],e.next=7,c.update((function(e){e.name=a}));case 7:I("Success! Updated deck name ".concat(t," -> ").concat(a)),e.next=11;break;case 10:throw new Error("reconciler::updateDeckName -- found ".concat(n.length," decks with the name ").concat(t,"!"));case 11:case"end":return e.stop()}}),e)}))));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),I(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ge(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(le.a)(ue.a.mark((function e(t,a){var n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type===ce.UpdateCardFront||t.type===ce.UpdateCardBack||t.type===ce.CreateCard){e.next=3;break}return I("Unexpected input to reconciler::createOrUpdateCard"),e.abrupt("return");case 3:return I("Attempting to create or update card in deck ".concat(t.deckName)),e.prev=4,n=a.collections.get(he.DECKS),e.next=8,a.action(Object(le.a)(ue.a.mark((function e(){var r,c,i,o,s,u,l,d,f;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.query(me.Q.where("name",me.Q.eq(t.deckName))).fetch();case 2:if(1!==(r=e.sent).length){e.next=45;break}if(I("Corresponding deck found!"),c=r[0],t.type!==ce.CreateCard){e.next=12;break}return I("Attempting to add new card. Front: ".concat(t.front," | Back: ").concat(t.back)),e.next=10,c.subAction((function(){return c.addCard(t.front,t.back)}));case 10:return I("Successfully added card! Front: ".concat(t.front," | Back: ").concat(t.back)),e.abrupt("return");case 12:if(i=a.collections.get(he.CARDS),t.type!==ce.UpdateCardFront){e.next=29;break}return o=i.query(me.Q.where("back",me.Q.eq(t.back)),me.Q.where("front",me.Q.eq(t.oldFront)),me.Q.where("deck_id",me.Q.eq(c.id))),e.next=17,o.fetch();case 17:if(1!==(s=e.sent).length){e.next=26;break}return I("Corresponding card found!"),u=s[0],e.next=23,u.update((function(e){e.front=t.newFront}));case 23:I("Successfully updated card front!"),e.next=27;break;case 26:throw new Error("reconciler::createOrUpdateCard -- found ".concat(s.length," cards with the same deck, front and back when attempting to update card!"));case 27:e.next=43;break;case 29:if(t.type!==ce.UpdateCardBack){e.next=43;break}return l=i.query(me.Q.where("back",me.Q.eq(t.oldBack)),me.Q.where("front",me.Q.eq(t.front)),me.Q.where("deck_id",me.Q.eq(c.id))),e.next=33,l.fetch();case 33:if(1!==(d=e.sent).length){e.next=42;break}return I("Corresponding card found!"),f=d[0],e.next=39,f.update((function(e){e.back=t.newBack}));case 39:I("Successfully updated card back!"),e.next=43;break;case 42:throw new Error("reconciler::createOrUpdateCard -- found ".concat(d.length," cards with the same deck, front and back when attempting to update card!"));case 43:e.next=46;break;case 45:throw new Error("reconciler::createOrUpdateCard -- found ".concat(r.length," decks with the name ").concat(t.deckName,"!"));case 46:case"end":return e.stop()}}),e)}))));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),I("createOrUpdateCard",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Oe(e,t){return we.apply(this,arguments)}function we(){return(we=Object(le.a)(ue.a.mark((function e(t,a){var n,r,c,i;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,c=null===(n=t.deck)||void 0===n?void 0:n.cards,I("Reconciling entire deck ".concat(r," with DB...")),e.prev=3,i=a.collections.get(he.DECKS),e.next=7,a.action(Object(le.a)(ue.a.mark((function e(){var t,n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.query(me.Q.where("name",me.Q.eq(r))).fetch();case 2:if(0!==(t=e.sent).length){e.next=8;break}return e.delegateYield(ue.a.mark((function e(){var t,a,n,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("DB has no deck with this name. Creating..."),e.next=3,i.create((function(e){e.name=r}));case 3:if(t=e.sent,I("Created!"),!c){e.next=23;break}a=Object(oe.a)(c),e.prev=7,o=ue.a.mark((function e(){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.value,I("Creating new card (Front: ".concat(a.front,", Back: ").concat(a.back,")")),e.next=4,t.subAction((function(){return t.addCard(a.front,a.back)}));case 4:case"end":return e.stop()}}),e)})),a.s();case 10:if((n=a.n()).done){e.next=14;break}return e.delegateYield(o(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:I("Finished adding its cards to the DB!");case 23:return I("Done adding deck ".concat(r," to the DB!")),e.abrupt("return",{v:void 0});case 25:case"end":return e.stop()}}),e,null,[[7,16,19,22]])}))(),"t0",5);case 5:if("object"!==typeof(n=e.t0)){e.next=8;break}return e.abrupt("return",n.v);case 8:if(1!==t.length){e.next=12;break}return e.delegateYield(ue.a.mark((function e(){var n,r,i,o,s;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I("Found 1 deck with this name already in the DB. Reconciling its cards now..."),n=t[0],!c){e.next=23;break}r=a.collections.get(he.CARDS),i=Object(oe.a)(c),e.prev=5,s=ue.a.mark((function e(){var t,a,c,i,s,u,l,d,f;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,I("Looking for card in deck (Front: ".concat(t.front,", Back: ").concat(t.back,")")),a=r.query(me.Q.where("deck_id",me.Q.eq(n.id)),me.Q.where("front",me.Q.eq(t.front)),me.Q.where("back",me.Q.eq(t.back))),e.next=5,a.fetchCount();case 5:if(1!==(c=e.sent)){e.next=9;break}return I("Card already exists in deck (Front: ".concat(t.front,", Back: ").concat(t.back,")")),e.abrupt("return","continue");case 9:if(!(c>1)){e.next=12;break}return I("Unexpected: ".concat(c," copies of card exists in deck (Front: ").concat(t.front,", Back: ").concat(t.back,")")),e.abrupt("return","continue");case 12:return I("Not found. Looking for card with just same front..."),i=r.query(me.Q.where("deck_id",me.Q.eq(n.id)),me.Q.where("front",me.Q.eq(t.front))),e.next=16,i.fetch();case 16:if(0!==(s=e.sent).length){e.next=39;break}return I("Not found. Looking for card with same back..."),u=r.query(me.Q.where("deck_id",me.Q.eq(n.id)),me.Q.where("back",me.Q.eq(t.back))),e.next=22,u.fetch();case 22:if(0!==(l=e.sent).length){e.next=29;break}return I("Creating new card (Front: ".concat(t.front,", Back: ").concat(t.back,")")),e.next=27,n.subAction((function(){return n.addCard(t.front,t.back)}));case 27:return I("Done creating new card."),e.abrupt("return","continue");case 29:if(1!==l.length){e.next=36;break}return d=l[0],I("Found a single card with matching back, so updating front."),e.next=34,d.update((function(e){e.front=t.front}));case 34:return I("Done updating front of card."),e.abrupt("return","continue");case 36:if(!(l.length>1)){e.next=39;break}return I("Unexpected: found ".concat(l.length," cards in deck have the same back (").concat(t.back,")")),e.abrupt("return","continue");case 39:if(1!==s.length){e.next=46;break}return f=s[0],I("Found a single card with matching front, so updating back."),e.next=44,f.update((function(e){e.back=t.back}));case 44:return I("Done updating back of card."),e.abrupt("return","continue");case 46:if(!(s.length>1)){e.next=49;break}return I("Unexpected: found ".concat(s.length," cards in deck have the same front (").concat(t.front,")")),e.abrupt("return","continue");case 49:case"end":return e.stop()}}),e)})),i.s();case 8:if((o=i.n()).done){e.next=15;break}return e.delegateYield(s(),"t0",10);case 10:if("continue"!==e.t0){e.next=13;break}return e.abrupt("continue",13);case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(5),i.e(e.t1);case 20:return e.prev=20,i.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[5,17,20,23]])}))(),"t1",10);case 10:e.next=13;break;case 12:throw new Error("Found ".concat(t.length," decks with the same name,"));case 13:case"end":return e.stop()}}),e)}))));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),I("createOrUpdateEntireDeck Error: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function ye(e,t){return je.apply(this,arguments)}function je(){return(je=Object(le.a)(ue.a.mark((function e(t,a){var n,r,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("Beginning to process what is guessed to be a multi-deck copy paste"),e.prev=1,n=Object(oe.a)(t.create_decks),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=11;break}return c=r.value,e.next=9,Oe(c,a);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:I("Finished processing what is guessed to be a multi-deck copy paste!"),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(1),I("createOrUpdateAllDecks Error: ",e.t1);case 25:case"end":return e.stop()}}),e,null,[[1,22],[3,13,16,19]])})))).apply(this,arguments)}function xe(){return(xe=Object(le.a)(ue.a.mark((function e(t,a,n){var r,c,i,o,s;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("Guessed action:",r=pe(t,a)),e.t0=r.type,e.next=e.t0===ce.Nothing||e.t0===ce.Delete?5:e.t0===ce.UpdateDeckName?6:e.t0===ce.UpdateCardFront||e.t0===ce.UpdateCardBack||e.t0===ce.CreateCard?10:e.t0===ce.CopyPasteSingleDeck||e.t0===ce.CreateDeck?13:e.t0===ce.CopyPasteMultiDecks?18:21;break;case 5:return e.abrupt("return");case 6:return c=r.oldDeckName,i=r.newDeckName,e.next=9,be(c,i,n);case 9:return e.abrupt("return");case 10:return e.next=12,ge(r,n);case 12:return e.abrupt("return");case 13:return o=r.deckName,s=a.create_decks.find((function(e){return e.name===o})),e.next=17,Oe(s,n);case 17:return e.abrupt("return");case 18:return e.next=20,ye(a,n);case 20:return e.abrupt("return");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.DECKS="decks",e.CARDS="cards",e.SESSIONS="sessions",e.SESSIONS_CARDS="sessions_cards",e.TAGS="tags",e.TAGS_CARDS="tags_cards"}(he||(he={}));var Se="Create Deck Practice Final:\n(1) Foo : Bar\n(2) Bill : Gates\n(3) Steve : Jobs\n(4) Justin : Trudeau \n(5) Evan : You\n";var Ee=a(307),Ne=a(306);function Ce(e){return r.a.createElement(Ne.a,Object.assign({elevation:6,variant:"filled"},e))}var _e=Object(d.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function De(e){var t=e.message,a=e.severity,n=_e(),c=r.a.useState({open:!0,vertical:"top",horizontal:"center"}),i=Object(o.a)(c,2),u=i[0],l=i[1],d=u.vertical,f=u.horizontal,p=u.open,h=function(){l(Object(s.a)({},u,{open:!1}))};return a||(a="error"),r.a.createElement("div",{className:n.root},r.a.createElement(Ee.a,{anchorOrigin:{vertical:d,horizontal:f},open:p,onClose:h},r.a.createElement(Ce,{onClose:h,severity:a},t)))}var Te=["create deck","(",":",")","add","tags","color","direction","alignment"];function Ae(e,t,a,n){var r;r=e.lastOpenedUnix,Date.now()-r>5e3&&function(e,t,a){var n=Date.now();e({open:!1,lastOpenedUnix:n}),e({open:!0,lastOpenedUnix:n,message:t,severity:a})}(t,a,n)}function ze(e){var t=Object(ie.useDatabase)(),a=Object(n.useState)({open:!1,lastOpenedUnix:0}),c=Object(o.a)(a,2),i=c[0],s=c[1],u=e.initialText,l=e.isInSession;function d(a){localStorage.setItem("cardEditorStrKey",a);try{B.makeTokenizer(a,ne);var n=new ee;n.parse(),0!==n.create_decks.length&&null===n.create_decks[n.create_decks.length-1].deck?(R("last deck is null, not sending dispatch"),Ae(i,s,"Add some cards to your deck like this: '(1) front : back'","info")):(i.open&&"success"!==i.severity?s({lastOpenedUnix:Date.now(),message:"Hooray!",severity:"success",open:!0}):Ae(i,s,"Hooray!","success"),localStorage.setItem("programAST",JSON.stringify(n)),function(e,t,a){return xe.apply(this,arguments)}(e.program,n,t).then((function(){return I("Background DB update complete!")})).catch((function(e){return I("Error during reconciliation!",e)})),e.dispatch({type:Ia.CardEditorParseSuccess,program:n}))}catch(r){R(r),Ae(i,s,"Double check your input! Perhaps you're missing a colon (:)","info")}}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-editor"},l?r.a.createElement("div",{className:"card-editor-codemirror card-hider"},u):r.a.createElement(_.UnControlled,{value:u,options:{mode:"xml",theme:"ayu-mirage",lineNumbers:!0},editorDidMount:function(t,a){re(t,Te),e.dispatch({type:Ia.SetCardEditor,cardEditor:t})},onChange:function(e,t,a){re(e,Te);var n=Date.now();localStorage.setItem("CARD_EDITOR_LAST_UPDATED",n.toString()),setTimeout((function(){console.log("marco");var e=localStorage.getItem("CARD_EDITOR_LAST_UPDATED");n.toString()===e&&(console.log("polo"),d(a))}),2e3)},className:"card-editor-codemirror"})),i.open&&r.a.createElement(De,{message:i.message,severity:i.severity}))}a(216);var Re,Ie=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).decks=[],e.type="decks",e}return Object(T.a)(a,[{key:"parseInteractivePrompt",value:function(){for(this.tokenizer.getAndCheckToken("decks:");this.tokenizer.moreTokens();)this.decks.push(this.tokenizer.getNext()),","===this.tokenizer.checkNext()&&this.tokenizer.getNext()}}]),a}(K),Le=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).type="sessions",e}return Object(T.a)(a,[{key:"parseInteractivePrompt",value:function(){this.tokenizer.getAndCheckToken("past sessions")}}]),a}(K);!function(e){e.Decks="decks",e.Sessions="sessions",e.Tags="tags",e.Undefined="undefined"}(Re||(Re={}));var Ue=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).subject=null,e.subjectType=Re.Undefined,e}return Object(T.a)(a,[{key:"parse",value:function(){var e=this.tokenizer.checkNext();if("past sessions"===e)this.subject=new Le,this.subjectType=Re.Sessions;else if("decks:"===e)this.subject=new Ie,this.subjectType=Re.Decks;else{if("tags:"!==e)throw new Error("Invalid Subject, must be 'Decks:', 'Tags:', or 'Past Sessions'");this.subject=new Y,this.subjectType=Re.Tags}this.subject.parseInteractivePrompt()}}]),a}(K),Pe=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).type="",e.filter="newest",e.limit=100,e.selectCards=!1,e}return Object(T.a)(a,[{key:"parse",value:function(){var e=this.tokenizer.getNext();if("show stats for"===e)this.type="show stats";else{if("start session from"!==e)throw new Error("Command must either start with 'Show stats for' or 'Start Session from'");this.type="start session"}var t=this.tokenizer.checkNext();isNaN(Number(t))||(this.limit=Math.round(Number(this.tokenizer.getNext())),t=this.tokenizer.checkNext()),te.includes(t)&&(this.filter=this.tokenizer.getNext(),t=this.tokenizer.checkNext()),"cards from"===t&&(this.selectCards=!0,this.tokenizer.getNext())}}]),a}(K),Fe=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).subjectModfier=null,e.subject=null,e}return Object(T.a)(a,[{key:"parse",value:function(){this.subjectModfier=new Pe,this.subjectModfier.parse(),this.subject=new Ue,this.subject.parse()}}]),a}(K),Me=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).type="",e}return Object(T.a)(a,[{key:"parse",value:function(){this.type="help",this.tokenizer.getAndCheckToken("help")}}]),a}(K),Qe=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).option="",e}return Object(T.a)(a,[{key:"parse",value:function(){if(this.tokenizer.getAndCheckToken("list"),this.option=this.tokenizer.getNext(),"tags"!==this.option&&"decks"!==this.option)throw new Error("Invalid list option")}}]),a}(K),qe=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"parse",value:function(){this.tokenizer.getAndCheckToken("export decks")}},{key:"evaluate",value:function(){var e=localStorage.getItem("cardEditorStrKey"),t=document.createElement("a");t.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),t.download="".concat((new Date).toISOString(),".txt"),t.click()}}]),a}(K),Be=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"parse",value:function(){this.tokenizer.getAndCheckToken("load decks")}}]),a}(K),Ke=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){return Object(D.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"parse",value:function(){this.tokenizer.getAndCheckToken("^quit$|^back to home$")}}]),a}(K),We=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).type="",e.command=null,e}return Object(T.a)(a,[{key:"parse",value:function(){var e=this.tokenizer.checkNext();if("help"===e?(this.command=new Me,this.type="help"):"list"===e?(this.command=new Qe,this.type="list"):"export decks"===e?(this.command=new qe,this.type="export decks"):"load decks"===e?(this.command=new Be,this.type="load decks"):"quit"===e||"back to home"===e?(this.command=new Ke,this.type="quit to home"):(this.command=new Fe,this.type="complex command"),null===this.command)throw new Error("Invalid command specified");this.command.parse()}},{key:"evaluate",value:function(){this.command.evaluate()}}]),a}(K),Ge=a(142),Ve=a.n(Ge),Ye=r.a.createElement("div",{style:{fontSize:"13px",lineHeight:"15px"}},r.a.createElement("h4",null,"To start a session from decks, tags or past sessions:"),'Enter \u201cstart session from [enter a number][choose one of \u201dbest" | "worst" | "random" | "oldest" | "newest" ] cards from [\u201cdecks\u201d | \u201ctags\u201d | \u201cpast sessions\u201d]: [enter a list of deck or tag names]\u201d ',r.a.createElement("br",null),'Or \u201cstart session from [enter a number][choose one of \u201dbest" | "worst" | "random" | "oldest" | "newest" ] decks: [enter a list of deck names]\u201d',r.a.createElement("h4",null,"To show stats from decks, tags or past sessions:"),'Enter \u201cshow stats for [enter a number][choose one of \u201dbest" | "worst" | "random" | "oldest" | "newest" ] cards from [\u201cdecks\u201d | \u201ctags\u201d | \u201cpast sessions\u201d]: [enter a list of deck or tag names]\u201d ',r.a.createElement("br",null),'Or \u201cshow stats for [enter a number][choose one of \u201dbest" | "worst" | "random" | "oldest" | "newest" ] decks: [enter a list of deck names]\u201d',r.a.createElement("h4",null,"To download your decks:")," Enter 'export decks'",r.a.createElement("h4",null,"To load decks from your computer:")," Enter 'load decks'",r.a.createElement("h4",null,"To go back to Home:")," Enter 'quit' or 'back to home'"),Je="";function He(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)({text:"> ",lines:["> "]}),u=Object(o.a)(s,2),l=u[0],d=l.text,f=l.lines,p=u[1],h=function(e,t){"clickaway"!==t&&i(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"command-editor"},r.a.createElement(_.UnControlled,{value:"> Help",options:{mode:"xml",theme:"yonce",lineNumbers:!0},editorDidMount:function(e,t){re(e,ae)},onChange:function(t,a,n){var r=n.split("\n");if(function(e,t){if(t.length<e.length||t.length>e.length+1)return!0;for(var a=0;a<e.length-1;++a)if(e[a]!==t[a])return!0;return t.length>e.length?""!==t[t.length-1]:!t[t.length-1].startsWith("> ")}(f,r))return console.log("invalid."),void function(e,t,a){console.log("reverting change"),e.getDoc().setValue(t),e.getDoc().setCursor(a)}(t,d,{line:f.length-1,ch:f[f.length-1].length});if(re(t,ae),console.log(n),console.table(r),n.endsWith("\n")){console.log("last line ended with newline");var c=n+"> ";p({text:c,lines:c.split("\n")}),t.getDoc().setValue(c),t.getDoc().setCursor({line:r.length-1,ch:2});var o=r[r.length-2].substr(2);console.log("value to parse: ",o);var s=!1;try{B.makeTokenizer(o,ae);var u=new We;if(u.parse(),console.log(u.command),"list"===u.type){var l=u.command;"decks"===l.option?e.dispatch({type:Ia.List,listOption:"decks"}):"tags"===l.option?e.dispatch({type:Ia.List,listOption:"tags"}):console.log("Unexpected list option: ",l.option)}else if("help"===u.type)s=!0;else if("export decks"===u.type)u.evaluate();else if("quit to home"===u.type)e.dispatch({type:Ia.QuitToHome});else if("load decks"===u.type){var h=document.createElement("input");h.type="file",h.onchange=function(t){var a=t.target.files[0],n=new FileReader;n.readAsText(a,"UTF-8"),n.onload=function(t){var a=t.target.result;e.dispatch({type:Ia.LoadDecks,createDSLValue:a})}},h.click()}else if(function(e){return"start session"===e.command.subjectModfier.type?(Je="start session",!0):"show stats"===e.command.subjectModfier.type&&(Je="show stats",!0)}(u)){var m=u.command.subjectModfier;if(m){var b="tags"===u.command.subject.subjectType;e.dispatch({type:"start session"===Je?Ia.StartSession:Ia.ShowStats,limit:m.limit,filter:m.filter,isLimitAppliedToCards:m.selectCards,deckNames:!b&&u.command.subject.subject.decks,subject:u.command.subject.subjectType,tagNames:b&&u.command.subject.subject.tags.map((function(e){return e.tagName}))})}}}catch(k){console.log(k),e.dispatch({type:Ia.CommandNotFound})}s&&i(!0)}}})),r.a.createElement(Ee.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:c,autoHideDuration:18e4,onClose:h,message:Ye,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{size:"small","aria-label":"close",color:"inherit",onClick:h},r.a.createElement(Ve.a,{fontSize:"small"})))}))}var $e=a(33),Xe=a(309),Ze=a(297),et=a(97),tt=a.n(et),at=a(98),nt=a.n(at),rt=Object(d.a)({root:{width:"100%"}});function ct(e){var t=e.cards,a=e.dispatch,n=e.setNextCard,c=e.addCardDataToLocalStorage,i=e.currentCard,s=e.currentResult,u=e.setResult,l=rt(),d=Object($e.a)(),f=r.a.useState(0),p=Object(o.a)(f,2),h=p[0],m=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,{variant:"text",steps:t.length,position:"static",activeStep:h,className:l.root,nextButton:r.a.createElement(Ze.a,{size:"small",onClick:function(){m((function(e){return e+1})),n(h+1),h==t.length-1&&a(!0),s?u(""):c(i,h,void 0)},disabled:h===t.length},"Next","rtl"===d.direction?r.a.createElement(tt.a,null):r.a.createElement(nt.a,null)),backButton:r.a.createElement(Ze.a,{size:"small",onClick:function(){m((function(e){return e-1})),n(h-1)},disabled:0===h},"rtl"===d.direction?r.a.createElement(nt.a,null):r.a.createElement(tt.a,null),"Back")}),r.a.createElement(Xe.a,{variant:"progress",steps:t.length,position:"static",activeStep:h,className:l.root,nextButton:null,backButton:null}))}var it=a(143),ot=a.n(it),st=a(83),ut=a(84);function lt(){var e=Object(st.a)(["\n  height: 100%;\n  width: 100%;\n  padding: 0;\n  display: flex;\n  align-items: ",";\n"]);return lt=function(){return e},e}function dt(){var e=Object(st.a)(["\n  width: ",";\n  height: ",";\n  writing-mode: ",";\n"]);return dt=function(){return e},e}function ft(){var e=Object(st.a)(["\n  font-weight: normal;\n  color: "," !important;\n  width: ",";\n  height: ",";\n  text-align: ",";\n  padding: 15px;\n"]);return ft=function(){return e},e}var pt=ut.a.h2(ft(),(function(e){return e.color||"black"}),(function(e){return"vertical"===e.direction?"":"100%"}),(function(e){return"vertical"===e.direction?"100%":""}),(function(e){return"vertical"===e.direction?"left":"left"===e.alignment||"right"===e.alignment&&"horizontal"===e.direction?e.alignment:"center"})),ht=Object(ut.a)(h.a)(dt(),(function(e){return"vertical"===e.direction?"15em":"25em"}),(function(e){return"vertical"===e.direction?"25em":"15em"}),(function(e){return"vertical"===e.direction?"vertical-rl":""})),mt=Object(ut.a)(b.a)(lt(),(function(e){return"vertical"===e.direction&&"right"===e.alignment?"flex-start":"vertical"===e.direction&&"left"===e.alignment?"flex-end":"center"}));function bt(e){var t="",a="",n="";return e.attributes&&e.attributes.forEach((function(e){switch(e.attributeType){case"color":t=e.value;break;case"direction":a=e.value;break;case"alignment":n=e.value}})),r.a.createElement(ht,{direction:a},r.a.createElement(mt,{alignment:n,direction:a},r.a.createElement(pt,{color:t,alignment:n,direction:a},e.content)))}var kt=Object(d.a)({root:{marginTop:"1em",textAlign:"center",margin:"0 auto"}});function gt(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],i=a[1],s=kt(),u=e.front,l=e.back,d=e.attributes,f=function(e){e.preventDefault(),i((function(e){return!e}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s.root},r.a.createElement(ot.a,{isFlipped:c,flipDirection:"vertical"},r.a.createElement("div",{onClick:f},r.a.createElement(bt,{content:u,attributes:d})),r.a.createElement("div",{onClick:f},r.a.createElement(bt,{content:l,onClick:f,attributes:d})))))}var vt,Ot=a(85),wt=a.n(Ot);function yt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Object(le.a)(ue.a.mark((function e(t,a){var n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collections.get(he.DECKS),e.next=3,n.query(me.Q.where("name",me.Q.oneOf(a))).fetch();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e,t){return St.apply(this,arguments)}function St(){return(St=Object(le.a)(ue.a.mark((function e(t,a){var n,r;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collections.get(he.DECKS),e.next=3,n.query(me.Q.where("id",a)).fetch();case 3:if(!((r=e.sent).length<1)){e.next=6;break}throw new Error("Unable to retrieve deck name for ID ".concat(a));case 6:return e.abrupt("return",r[0].name);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Et(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(le.a)(ue.a.mark((function e(t,a){var n,r,c,i,o,s,u,l,d;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,a.cards;case 3:r=e.sent,c=Object(oe.a)(r);try{for(c.s();!(i=c.n()).done;)o=i.value,n[o.deck_id]||(n[o.deck_id]=!0,n.push(o.deck_id))}catch(f){c.e(f)}finally{c.f()}s=[],u=0,l=n;case 8:if(!(u<l.length)){e.next=18;break}return d=l[u],e.t0=s,e.next=13,xt(t,d);case 13:e.t1=e.sent,s=e.t0.concat.call(e.t0,e.t1);case 15:u++,e.next=8;break;case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e,t){return _t.apply(this,arguments)}function _t(){return(_t=Object(le.a)(ue.a.mark((function e(t,a){var n,r,c,i,o;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,yt(t,a);case 3:r=e.sent,c=Object(oe.a)(r),e.prev=5,c.s();case 7:if((i=c.n()).done){e.next=16;break}return o=i.value,e.t0=n,e.next=12,o.cards.fetch();case 12:e.t1=e.sent,n=e.t0.concat.call(e.t0,e.t1);case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t2=e.catch(5),c.e(e.t2);case 21:return e.prev=21,c.f(),e.finish(21);case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,null,[[5,18,21,24]])})))).apply(this,arguments)}function Dt(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(le.a)(ue.a.mark((function e(t){var a;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collections.get(he.SESSIONS),e.next=3,a.query().fetch();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(e){return zt.apply(this,arguments)}function zt(){return(zt=Object(le.a)(ue.a.mark((function e(t){var a,n,r=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:5,e.next=3,Dt(t);case 3:return n=e.sent,e.abrupt("return",n.sort((function(e,t){return t.started_at-e.started_at})).slice(0,a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rt(e){return It.apply(this,arguments)}function It(){return(It=Object(le.a)(ue.a.mark((function e(t){var a,n,r,c,i,o,s,u=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:5,n=[],e.next=4,At(t,a);case 4:r=e.sent,c=Object(oe.a)(r),e.prev=6,c.s();case 8:if((i=c.n()).done){e.next=16;break}return o=i.value,e.next=12,o.cards;case 12:s=e.sent,n.concat(s);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),c.e(e.t0);case 21:return e.prev=21,c.f(),e.finish(21);case 24:return e.abrupt("return",Kt(n));case 25:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})))).apply(this,arguments)}function Lt(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=[];switch(t){case vt.BEST:n=e.sort((function(e,t){return t.right-t.wrong-(e.right-e.wrong)})).slice(0,a);break;case vt.WORST:n=e.sort((function(e,t){return e.right-e.wrong-(t.right-t.wrong)})).slice(0,a);break;case vt.NEWEST:n=e.sort((function(e,t){return t.created_at-e.created_at})).slice(0,a);break;case vt.OLDEST:n=e.sort((function(e,t){return e.created_at-t.created_at})).slice(0,a);break;case vt.RANDOM:n=U(e).slice(0,a);break;default:throw new Error("Unknown CARD_MODIFIER: ".concat(t))}return n}function Ut(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(le.a)(ue.a.mark((function e(t,a){var n,r,c,i,o,s,u,l,d=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>2&&void 0!==d[2]?d[2]:1,r=[],c=new Map,i=Object(oe.a)(t),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=15;break}return s=o.value,e.next=10,s.cards.fetch();case 10:u=e.sent,l=Qt(u),c.set(s.id,l);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),i.e(e.t0);case 20:return e.prev=20,i.f(),e.finish(20);case 23:e.t1=a,e.next=e.t1===vt.BEST?26:e.t1===vt.WORST?28:e.t1===vt.NEWEST?30:e.t1===vt.OLDEST?32:e.t1===vt.RANDOM?34:36;break;case 26:return r=t.sort((function(e,t){return c.get(t.id)-c.get(e.id)})).slice(0,n),e.abrupt("break",37);case 28:return r=t.sort((function(e,t){return c.get(e.id)-c.get(t.id)})).slice(0,n),e.abrupt("break",37);case 30:return r=t.sort((function(e,t){return t.created_at-e.created_at})).slice(0,n),e.abrupt("break",37);case 32:return r=t.sort((function(e,t){return e.created_at-t.created_at})).slice(0,n),e.abrupt("break",37);case 34:return r=U(t).slice(0,n),e.abrupt("break",37);case 36:throw new Error("Unknown CARD_MODIFIER: ".concat(a));case 37:return e.abrupt("return",r);case 38:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})))).apply(this,arguments)}function Ft(e,t,a){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(le.a)(ue.a.mark((function e(t,a,n){var r,c,i,o,s,u,l,d=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>3&&void 0!==d[3]?d[3]:1,c=[],i=new Map,o=Object(oe.a)(a),e.prev=4,o.s();case 6:if((s=o.n()).done){e.next=15;break}return u=s.value,e.next=10,qt(t,u);case 10:l=e.sent,l=isNaN(l)?0:l,i.set(u.id,l);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),o.e(e.t0);case 20:return e.prev=20,o.f(),e.finish(20);case 23:e.t1=n,e.next=e.t1===vt.BEST?26:e.t1===vt.WORST?28:e.t1===vt.NEWEST?30:e.t1===vt.OLDEST?32:e.t1===vt.RANDOM?34:36;break;case 26:return c=a.sort((function(e,t){return i.get(t.id)-i.get(e.id)})).slice(0,r),e.abrupt("break",37);case 28:return c=a.sort((function(e,t){return i.get(e.id)-i.get(t.id)})).slice(0,r),e.abrupt("break",37);case 30:return c=a.sort((function(e,t){return t.started_at-e.started_at})).slice(0,r),e.abrupt("break",37);case 32:return c=a.sort((function(e,t){return e.started_at-t.started_at})).slice(0,r),e.abrupt("break",37);case 34:return c=U(a).slice(0,r),e.abrupt("break",37);case 36:throw new Error("Unknown CARD_MODIFIER: ".concat(n));case 37:return console.log(c),e.abrupt("return",c);case 39:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})))).apply(this,arguments)}function Qt(e){var t=0,a=0;return e.forEach((function(e){t+=e.right,a+=e.wrong})),t/(t+a)}function qt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(le.a)(ue.a.mark((function e(t,a){var n,r,c,i;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collections.get(he.SESSIONS_CARDS),e.next=3,n.query(me.Q.where("session_id",a.id)).fetch();case 3:return r=e.sent,c=r.length,i=0,r.forEach((function(e){i+=e.is_correct?1:0})),e.abrupt("return",i/c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e){var t,a=[],n=new Set,r=Object(oe.a)(e);try{for(r.s();!(t=r.n()).done;){var c=t.value;n.has(c.id)||(a.push(c),n.add(c.id))}}catch(i){r.e(i)}finally{r.f()}return a}!function(e){e.BEST="best",e.WORST="worst",e.RANDOM="random",e.OLDEST="oldest",e.NEWEST="newest"}(vt||(vt={}));function Wt(e,t){var a={},n={};return e.create_decks.forEach((function(e){var t,a;(null===(t=e.deck)||void 0===t||null===(a=t.cards)||void 0===a?void 0:a.length)>0&&(n[e.name.toLowerCase()]=e.name)})),t.forEach((function(e){var t=n[e.toLowerCase()];t&&(a[t]=!0)})),Object.keys(a)}function Gt(e){var t,a=[],n=Object(oe.a)(e);try{for(n.s();!(t=n.n()).done;){var r,c=t.value,i=c.name,o=Object(oe.a)(c.deck.cards);try{for(o.s();!(r=o.n()).done;){var s=r.value,u={front:s.front,back:s.back,deckName:i};a.push(u)}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}return a}function Vt(e,t,a,n){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(le.a)(ue.a.mark((function e(t,a,n,r){var c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(Q(a),n<a.length&&a.splice(n)),c=Q(c=Gt(a)),r&&(Q(c),n<c.length&&c.splice(n)),e.abrupt("return",{deckNames:t,cards:c});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(e,t,a){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(le.a)(ue.a.mark((function e(t,a,n){var r,c,i,o,s,u;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},n.forEach((function(e){var t=e.deckName,a=e.front,n=e.back;r["".concat(t,":").concat(a,":").concat(n)]=!0})),c=[],e.next=5,yt(t,a);case 5:i=e.sent,o=Object(oe.a)(i),e.prev=7,u=ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.value,e.next=3,t.cards.fetch();case 3:e.sent.forEach((function(e){var a=e.front,n=e.back,i=e.right,o=e.wrong,s=e.created_at;r["".concat(t.name,":").concat(a,":").concat(n)]&&c.push({deckName:t.name,front:a,back:n,right:i,wrong:o,createdAt:s})}));case 5:case"end":return e.stop()}}),e)})),o.s();case 10:if((s=o.n()).done){e.next=14;break}return e.delegateYield(u(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(7),o.e(e.t1);case 19:return e.prev=19,o.f(),e.finish(19);case 22:return e.abrupt("return",c);case 23:case"end":return e.stop()}}),e,null,[[7,16,19,22]])})))).apply(this,arguments)}function $t(e,t,a,n,r,c){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(le.a)(ue.a.mark((function e(t,a,n,r,c,i){var o,s,u,l,d,f,p;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q(o=Gt(n)),i){e.next=7;break}if(!(c>=n.length)){e.next=5;break}return e.abrupt("return",{deckNames:a,cards:o});case 5:e.next=9;break;case 7:if(!(c>=o.length)){e.next=9;break}return e.abrupt("return",{deckNames:a,cards:o});case 9:if(!i){e.next=19;break}return e.next=12,Jt(t,a,o);case 12:switch(s=e.sent,r){case vt.BEST:s.sort((function(e,t){return-(e.right-e.wrong-(t.right-t.wrong))}));case vt.WORST:s.sort((function(e,t){return e.right-e.wrong-(t.right-t.wrong)}));case vt.OLDEST:s.sort((function(e,t){return e.createdAt-t.createdAt}));case vt.NEWEST:s.sort((function(e,t){return-(e.createdAt-t.createdAt)}))}return s.splice(c),Q(s),e.abrupt("return",{deckNames:a,cards:s});case 19:return e.next=21,yt(t,a);case 21:return u=e.sent,e.next=24,Ut(u,r,c);case 24:return l=e.sent,d={},l.forEach((function(e){d[e.name]=!0})),f=n.filter((function(e){return d[e.name]})),Q(p=Gt(f)),e.abrupt("return",{deckNames:a,cards:p});case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(e,t,a,n,r){return ea.apply(this,arguments)}function ea(){return(ea=Object(le.a)(ue.a.mark((function e(t,a,n,r,c){var i,o,s,u=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=u.length>5&&void 0!==u[5]?u[5]:5,o=Wt(a,n),s=a.create_decks.filter((function(e){return o.includes(e.name)})),r&&r!==vt.RANDOM){e.next=7;break}return e.abrupt("return",Vt(o,s,i,c));case 7:return e.next=9,$t(t,o,s,r,i,c);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t,a,n,r,c){return aa.apply(this,arguments)}function aa(){return(aa=Object(le.a)(ue.a.mark((function e(t,a,n,r,c,i){var o,s;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.create_decks.filter((function(e){var t=e.tags&&e.tags.tags.map((function(e){return e.tagName})),a=!1;return t&&t.forEach((function(e){n.includes(e)&&(a=!0)})),a})),s=o.map((function(e){return e.name})),e.next=4,Vt(s,o,i,c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t,a){return ra.apply(this,arguments)}function ra(){return(ra=Object(le.a)(ue.a.mark((function e(t,a,n){var r,c,i,o,s,u,l,d,f,p,h,m,b,k,g=arguments;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>3&&void 0!==g[3]?g[3]:5,!n){e.next=7;break}return e.next=4,Dt(t);case 4:c=e.sent,e.next=19;break;case 7:if(!a){e.next=16;break}return e.next=10,Dt(t);case 10:return c=e.sent,e.next=13,Ft(t,c,a,r);case 13:c=e.sent,e.next=19;break;case 16:return e.next=18,At(t,r);case 18:c=e.sent;case 19:i=[],o=Object(oe.a)(c),e.prev=21,o.s();case 23:if((s=o.n()).done){e.next=31;break}return u=s.value,e.next=27,u.cards;case 27:(l=e.sent).concat(l);case 29:e.next=23;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(21),o.e(e.t0);case 36:return e.prev=36,o.f(),e.finish(36);case 39:i=Kt(i),n&&i.length>r&&(i=a?Lt(i,a,r):U(i).splice(r)),U(i),d=t.collections.get(he.DECKS),f={},p=[],h=Object(oe.a)(i),e.prev=46,h.s();case 48:if((m=h.n()).done){e.next=58;break}if(b=m.value,f[b.deck_id]){e.next=54;break}return e.next=53,d.query(me.Q.where("id",me.Q.eq(b.deck_id))).fetch();case 53:f[b.deck_id]=e.sent[0].name;case 54:k=f[b.deck_id],p.push({deckName:k,front:b.front,back:b.back});case 56:e.next=48;break;case 58:e.next=63;break;case 60:e.prev=60,e.t1=e.catch(46),h.e(e.t1);case 63:return e.prev=63,h.f(),e.finish(63);case 66:return e.abrupt("return",{cards:p});case 67:case"end":return e.stop()}}),e,null,[[21,33,36,39],[46,60,63,66]])})))).apply(this,arguments)}function ca(e,t){var a=e.create_decks.find((function(e){return e.name===t.deckName}));t.tags=a.tags&&a.tags.tags.map((function(e){return e&&e.tagName})),t.attributes=a.attributes&&a.attributes.attributes.map((function(e){return e?{attributeType:e.attribute.attributeType,value:e.attribute.value}:null}))}function ia(e,t,a){return oa.apply(this,arguments)}function oa(){return(oa=Object(le.a)(ue.a.mark((function e(t,a,n){var r,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa(t,a,n);case 2:return(r=e.sent).cards.forEach((function(e){return ca(t,e)})),r.deckNames&&(c={},r.cards.forEach((function(e){c[e.deckName]=!0})),r.deckNames=Object.keys(c)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(e,t,a){return ua.apply(this,arguments)}function ua(){return(ua=Object(le.a)(ue.a.mark((function e(t,a,n){var r,c,i,o,s,u;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.subject,c=a.filter,i=a.isLimitAppliedToCards,o=a.limit,s=a.deckNames,u=a.tagNames,"decks"!==r){e.next=7;break}return e.next=4,Zt(n,t,s,c,i,o);case 4:return e.abrupt("return",e.sent);case 7:if("tags"!==r){e.next=13;break}return e.next=10,ta(n,t,u,c,i,o);case 10:return e.abrupt("return",e.sent);case 13:if("sessions"!==r){e.next=19;break}return e.next=16,na(n,c,i,o);case 16:return e.abrupt("return",e.sent);case 19:throw new Error("Not supported!");case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var la=a(298);function da(e,t,a){var n,r,c,i=localStorage.getItem("sessionData");if(i){(n=(r=JSON.parse(i)).cardDataArray)||(n=[]);var o="".concat(e.deckName,"_").concat(e.front,"_").concat(e.back),u={card_id:o,front:e.front,back:e.back,is_correct:a,card_index:t,deck:e.deckName,tags:e.tags},l=n.filter((function(e){return e.card_id===o}))[0],d=n.indexOf(l);l?n[d]=u:n.push(u),c=Object(s.a)({},r,{cardDataArray:n}),localStorage.setItem("sessionData",JSON.stringify(c))}}function fa(){return(fa=Object(le.a)(ue.a.mark((function e(t,a){var n,r,c,i;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.collections.get(he.SESSIONS),r=a.collections.get(he.CARDS),c=a.collections.get(he.DECKS),i=a.collections.get(he.SESSIONS_CARDS),e.next=6,a.action(Object(le.a)(ue.a.mark((function e(){var a,o,s,u,l;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,n.create((function(e){e.started_at=new Date(t.created_at),e.ended_at=new Date(t.ended_at)}));case 3:o=e.sent,s=Object(oe.a)(t.cardDataArray),e.prev=5,l=ue.a.mark((function e(){var n,s,l,d,f;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(n=u.value).is_correct&&!1!==n.is_correct){e.next=21;break}if(a[n.deck]){e.next=6;break}return e.next=5,c.query(me.Q.where("name",me.Q.eq(n.deck))).fetch();case 5:a[n.deck]=e.sent[0];case 6:return s=a[n.deck].id,e.next=9,r.query(me.Q.where("deck_id",me.Q.eq(s)),me.Q.where("front",me.Q.eq(n.front)),me.Q.where("back",me.Q.eq(n.back))).fetch();case 9:if(0!==(l=e.sent).length){e.next=16;break}return f=a[n.deck],e.next=14,f.subAction(Object(le.a)(ue.a.mark((function e(){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.addCard(n.front,n.back);case 2:d=e.sent;case 3:case"end":return e.stop()}}),e)}))));case 14:e.next=17;break;case 16:d=l[0];case 17:return e.next=19,d.update((function(e){n.is_correct?e.right++:e.wrong++,e.last_tested_at=new Date(t.ended_at)}));case 19:return e.next=21,i.create((function(e){e.card_id=d.id,e.session_id=o.id,e.is_correct=n.is_correct}));case 21:case"end":return e.stop()}}),e)})),s.s();case 8:if((u=s.n()).done){e.next=12;break}return e.delegateYield(l(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),s.e(e.t1);case 17:return e.prev=17,s.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[5,14,17,20]])}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(e){var t,a,n=localStorage.getItem("sessionData");if(n&&(t=(a=JSON.parse(n)).ended_at),a&&!t){var r=Object(s.a)({},a,{ended_at:(new Date).toString()});!function(e,t){fa.apply(this,arguments)}(r,e);var c=JSON.stringify(r);localStorage.setItem("sessionData",c)}}function ha(e){var t=Object(ie.useDatabase)(),a=Object(n.useState)(""),c=Object(o.a)(a,2),i=c[0],u=c[1],l=Object(n.useState)(!1),d=Object(o.a)(l,2),f=d[0],p=d[1],h=Object(n.useState)(0),m=Object(o.a)(h,2),b=m[0],k=m[1],g=Object(n.useState)(null),v=Object(o.a)(g,2),O=v[0],w=v[1],y=Object(n.useState)(!0),j=Object(o.a)(y,2),x=j[0],S=j[1],E=Object(n.useState)(null),N=Object(o.a)(E,2),C=N[0],_=N[1];Object(n.useEffect)((function(){var a=function(e,t){var a=t.subject,n=t.deckNames,r=t.tagNames;if("decks"===a){if(!n)return{message:"Please select one or more of the decks on the card editor"};var c=e.create_decks.map((function(e){return e.name})),i=new Set;if(n.forEach((function(e){-1!==c.findIndex((function(t){return e.toLowerCase()===t.toLowerCase()}))&&i.add(e)})),0===i.size)return{message:"Please select one or more of the decks on the card editor"}}else if("tags"===a){if(0===r.length)return{message:"Please select one or more of the tags on the card editor"};var o=[];e.create_decks.forEach((function(e){e.tags&&e.tags.tags.forEach((function(e){return o.push(e.tagName)}))}));var s=!1;if(r.forEach((function(e){o.includes(e)||(s=!0)})),s)return{message:"Please select one or more of the tags on the card editor"}}return!1}(e.program,e.complexCommandParams);a?_(new Error(a.message)):function(){var a=Object(le.a)(ue.a.mark((function a(){var n,r,c,i;return ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ia(e.program,e.complexCommandParams,t);case 3:R(n=a.sent),r=(new Date).toString(),c={created_at:r,session_id:r},i=JSON.stringify(c),localStorage.setItem("sessionData",i),w(n),S(!1),_(null),a.next=19;break;case 14:a.prev=14,a.t0=a.catch(0),R(a.t0),_(a.t0),S(!1);case 19:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(){return a.apply(this,arguments)}}()()}),[]),Object(n.useEffect)((function(){f&&(pa(t),e.dispatch({type:Ia.PostSession}))}),[f]);return C?r.a.createElement(De,{message:C.message}):f||x?r.a.createElement(la.a,null):r.a.createElement(r.a.Fragment,null,!f&&r.a.createElement("div",{className:"session-container"},r.a.createElement("h1",null,"Session"),r.a.createElement("div",{className:"session-duration"},r.a.createElement("h3",{className:"duration"},"DURATION: "),r.a.createElement("br",null),r.a.createElement(wt.a,{initialTime:1e3},(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"timer"},r.a.createElement(wt.a.Minutes,null)," mins ",r.a.createElement(wt.a.Seconds,null)," secs"))})),function(){if(e.complexCommandParams.subject===Re.Decks||e.complexCommandParams.subject===Re.Tags)return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"decks"},"DECKS: "),r.a.createElement("br",null),r.a.createElement("p",{className:"deckNames"},O.deckNames.map((function(e){return e===O.deckNames[O.deckNames.length-1]?r.a.createElement("span",{key:e},e," "):r.a.createElement("span",{key:e},e,", ")}))));if(e.complexCommandParams.subject===Re.Sessions){var t,a=null===(t=e.complexCommandParams.limit)||void 0===t?void 0:t.toString();return a||(a="5"),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"decks"},"Past Sessions"),r.a.createElement("br",null),r.a.createElement("p",{className:"deckNames"},a))}}()),r.a.createElement(ct,{cards:O.cards,dispatch:p,setNextCard:k,addCardDataToLocalStorage:da,currentCard:O.cards[b],currentResult:i,setResult:u}),r.a.createElement(gt,{front:O.cards[b].front,back:O.cards[b].back,attributes:O.cards[b].attributes}),r.a.createElement("div",{style:{textAlign:"center",marginTop:"3em"}},r.a.createElement("input",{alt:"correct",type:"image",src:"https://daranguyen.com/assets/correct_btn.svg",style:{width:"3em",marginRight:"4em"},onClick:function(){u("Correct!"),da(Object(s.a)({},O.cards[b],{nextCardIndex:b}),b,!0)}}),r.a.createElement("input",{alt:"wrong",type:"image",src:"https://daranguyen.com/assets/wrong_btn.svg",style:{width:"3em"},onClick:function(){u("Try again!"),R(i),da(Object(s.a)({},O.cards[b],{nextCardIndex:b}),b,!1)}})),r.a.createElement("h2",null,i)))}var ma,ba=a(300),ka=a(304),ga=a(303),va=a(299),Oa=a(301),wa=a(305),ya=a(302);!function(e){e[e.CARD_COLUMNS=0]="CARD_COLUMNS",e[e.SUMMARY_COLUMNS=1]="SUMMARY_COLUMNS",e[e.DECK_COLUMNS=2]="DECK_COLUMNS",e[e.SESSION_COLUMNS=3]="SESSION_COLUMNS"}(ma||(ma={}));var ja=Object(d.a)({root:{width:"100%"},container:{maxHeight:520}}),xa=[{id:"indexString",label:"",minWidth:20,align:"center"},{id:"front",label:"Front",minWidth:80,align:"center"},{id:"back",label:"Back",minWidth:80,align:"center"},{id:"score",label:"Score",minWidth:80,align:"center"},{id:"deck",label:"Deck",minWidth:80,align:"center"}],Sa=[{id:"indexString",label:"",minWidth:20,align:"center"},{id:"front",label:"Front",minWidth:80,align:"center"},{id:"back",label:"Back",minWidth:80,align:"center"},{id:"results",label:"Results",minWidth:80,align:"center"},{id:"deck",label:"Deck",minWidth:80,align:"center"},{id:"tagsString",label:"Tags",minWidth:80,align:"center"}],Ea=[{id:"indexString",label:"",minWidth:20,align:"center"},{id:"name",label:"Name",minWidth:20,align:"center"},{id:"count",label:"Card Count",minWidth:80,align:"center"},{id:"score",label:"Score",minWidth:80,align:"center"}],Na=[{id:"indexString",label:"",minWidth:20,align:"center"},{id:"dateString",label:"Date",minWidth:80,align:"center"},{id:"count",label:"Card Count",minWidth:80,align:"center"},{id:"score",label:"Score",minWidth:80,align:"center"},{id:"duration",label:"Duration(secs)",minWidth:80,align:"center"},{id:"decksString",label:"Decks",minWidth:80,align:"center"}];function Ca(e){var t=e.rows,a=e.columnType,n=ja(),c=r.a.useState(0),i=Object(o.a)(c,2),s=i[0],u=i[1],l=r.a.useState(10),d=Object(o.a)(l,2),f=d[0],p=d[1],h=null;switch(a){case ma.CARD_COLUMNS:h=xa;break;case ma.SUMMARY_COLUMNS:h=Sa;break;case ma.DECK_COLUMNS:h=Ea;break;case ma.SESSION_COLUMNS:h=Na}return r.a.createElement(S.a,{className:n.root},r.a.createElement(va.a,{className:n.container},r.a.createElement(ba.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(Oa.a,null,r.a.createElement(ya.a,null,h.map((function(e){return r.a.createElement(ga.a,{key:e.id,align:"center",style:{minWidth:e.minWidth}},e.label)})))),r.a.createElement(ka.a,null,t.slice(s*f,s*f+f).map((function(e){return r.a.createElement(ya.a,{hover:!0,role:"checkbox",tabIndex:-1,key:"".concat(e.indexString,"_").concat(e.front)},h.map((function(t){var a=e[t.id];return r.a.createElement(ga.a,{key:t.id,align:"center"},a)})))}))))),r.a.createElement(wa.a,{rowsPerPageOptions:[10,25,100],component:"div",count:t.length,rowsPerPage:f,page:s,onChangePage:function(e,t){u(t)},onChangeRowsPerPage:function(e){p(+e.target.value),u(0)}}))}a(221);var _a,Da=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"overViewTable"},r.a.createElement("tbody",{className:"overViewTable"},r.a.createElement("tr",{key:"statsOverviewHeading",className:"overViewTable"},function(e){return e&&Object.keys(e.overview).map((function(e){return r.a.createElement("td",{key:e,className:"overViewTable"},e)}))}(e)),r.a.createElement("tr",{key:"statsOverviewValues",className:"overViewTable"},function(e){return e&&Object.values(e.overview).map((function(e,t){return r.a.createElement("th",{key:"".concat(e.toString(),"_").concat(t),className:"overViewTable"},e)}))}(e)))))};function Ta(e){var t={view:_a.LOADING},a=Object(n.useState)(t),c=Object(o.a)(a,2),i=c[0],s=c[1],u=Object(ie.useDatabase)(),l=e.complexCommandParams,d=l.limit,f=l.filter,p=l.isLimitAppliedToCards,h=l.deckNames,m=l.subject;function b(){return k.apply(this,arguments)}function k(){return(k=Object(le.a)(ue.a.mark((function e(){var t,a,n,r,c;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,a=t.rows,n=t.highestScore,r=t.lowestScore,c=t.averageScore,e.abrupt("return",{overview:{"average score":c,"highest score":n,"lowest score":r},details:a,columnType:O()});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return v.apply(this,arguments)}function v(){return(v=Object(le.a)(ue.a.mark((function t(){var a,n,r,c,i,o,s,l,b,k,g,v,O,w,y,j,x,S,E,N,C,_,D,T,A,z,R,I,L;return ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],n=NaN,r=NaN,c=NaN,i=1,!p){t.next=56;break}if(m!==Re.Decks){t.next=12;break}return t.next=9,Ct(u,h);case 9:o=t.sent,t.next=19;break;case 12:if(m!==Re.Sessions){t.next=18;break}return t.next=15,Rt(u,d);case 15:o=t.sent,t.next=19;break;case 18:throw new Error("Retrieving stats for cards from ".concat(m," is not supported"));case 19:s=Lt(o,f,d),l=0,b=Object(oe.a)(s),t.prev=22,b.s();case 24:if((k=b.n()).done){t.next=45;break}return g=k.value,v=g.right/(g.wrong+g.right),l+=v,n=isNaN(n)||v>n?v:n,r=isNaN(r)||v<r?v:r,t.t0=a,t.t1=P,t.t2=i,t.t3=g.front,t.t4=g.back,t.t5=g.right,t.t6=g.wrong,t.next=39,xt(u,g.deck_id);case 39:t.t7=t.sent,t.t8=(0,t.t1)(t.t2,t.t3,t.t4,t.t5,t.t6,t.t7),a=t.t0.concat.call(t.t0,t.t8),i+=1;case 43:t.next=24;break;case 45:t.next=50;break;case 47:t.prev=47,t.t9=t.catch(22),b.e(t.t9);case 50:return t.prev=50,b.f(),t.finish(50);case 53:c=Number((l/s.length).toFixed(2)),t.next=131;break;case 56:if(m!==Re.Decks){t.next=89;break}return t.next=59,yt(u,h);case 59:return O=t.sent,t.next=62,Ut(O,f,d);case 62:w=t.sent,y=Object(oe.a)(w),t.prev=64,y.s();case 66:if((j=y.n()).done){t.next=78;break}return x=j.value,t.next=70,x.cards.fetch();case 70:S=t.sent,E=Number(Qt(S).toFixed(2)),a=a.concat(F(i,x.name,S.length,E)),n=isNaN(n)||E>n?E:n,r=isNaN(r)||E<r?E:r,i+=1;case 76:t.next=66;break;case 78:t.next=83;break;case 80:t.prev=80,t.t10=t.catch(64),y.e(t.t10);case 83:return t.prev=83,y.f(),t.finish(83);case 86:c=Number((a.reduce((function(e,t){return e+t.score}),0)/(a.length||1)).toFixed(2)),t.next=131;break;case 89:if(m!==Re.Sessions){t.next=130;break}return t.next=92,At(u,d);case 92:return N=t.sent,t.next=95,Ft(u,N,f,d);case 95:C=t.sent,_=0,D=Object(oe.a)(C),t.prev=98,D.s();case 100:if((T=D.n()).done){t.next=119;break}return A=T.value,t.next=104,Et(u,A);case 104:return z=t.sent,t.next=107,A.sessionCards;case 107:R=t.sent,I=0,R.forEach((function(e){I+=e.is_correct?1:0})),L=Number((I/R.length).toFixed(2)),L=isNaN(L)?0:L,n=isNaN(n)||L>n?L:n,r=isNaN(r)||L<r?L:r,a=a.concat(M(i,R.length,I,A.started_at,A.ended_at,z)),i+=1,_+=L;case 117:t.next=100;break;case 119:t.next=124;break;case 121:t.prev=121,t.t11=t.catch(98),D.e(t.t11);case 124:return t.prev=124,D.f(),t.finish(124);case 127:c=Number((_/C.length).toFixed(2)),t.next=131;break;case 130:throw new Error("Command not currently supported: "+e.complexCommandParams);case 131:return t.abrupt("return",{rows:a,highestScore:n,lowestScore:r,averageScore:c});case 132:case"end":return t.stop()}}),t,null,[[22,47,50,53],[64,80,83,86],[98,121,124,127]])})))).apply(this,arguments)}function O(){if(p)return ma.CARD_COLUMNS;switch(m){case Re.Decks:return ma.DECK_COLUMNS;case Re.Sessions:return ma.SESSION_COLUMNS;case Re.Tags:return ma.DECK_COLUMNS}}return Object(n.useEffect)((function(){(function(){var e=Object(le.a)(ue.a.mark((function e(){var t;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:t=e.sent,s({view:_a.READY,statsObject:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({view:_a.ERROR,error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[e.complexCommandParams]),i.view===_a.LOADING?r.a.createElement(la.a,{style:{margin:"auto"}}):i.view===_a.ERROR?(console.log(i.error),r.a.createElement("h1",{style:{margin:"auto"}},"Something went wrong when trying to fetch the stats")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"right-side-container"},r.a.createElement("h1",null," Statistics"),r.a.createElement(Da,{overview:i.statsObject.overview}),r.a.createElement(Ca,{rows:i.statsObject.details,columnType:i.statsObject.columnType})))}function Aa(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"session-container",style:{textAlign:"center"}},r.a.createElement("h1",null,"Deck: ",e.name),e.deck.deck.cards.map((function(e){return r.a.createElement(gt,{front:e.front,back:e.back})}))))}!function(e){e[e.LOADING=0]="LOADING",e[e.READY=1]="READY",e[e.ERROR=2]="ERROR"}(_a||(_a={}));function za(){var e=function(){var e=localStorage.getItem("sessionData"),t=e&&JSON.parse(e),a=t.ended_at,n=t.created_at,r=new Date(a),c=new Date(n),i=r.getTime()-c.getTime(),o=Math.floor(i/6e4),s=(i%6e4/1e3).toFixed(0);return{overview:{"total time":"".concat(o," min ").concat(s," sec")},details:t.cardDataArray&&t.cardDataArray.map((function(e){return function(e,t,a,n,r,c){var i,o;return i=void 0===n?"skipped":n?"correct":"incorrect",o=c&&c.length>0?c.join(", "):"none",{indexString:e.toString()+".)",front:t,back:a,results:i,deck:r,tagsString:o}}(e.card_index+1,e.front,e.back,e.is_correct,e.deck,e.tags)}))||[]}}(),t=function(e){var t=e.reduce((function(e,t){return e+(t&&"correct"===t.results?1:0)}),0),a=e.length;return[[t&&t.toString(),a&&a.toString()].join("/"),t===a&&0!==a]}(e.details),a=Object(o.a)(t,2),n=a[0],c=a[1];return r.a.createElement("div",{className:"right-side-container"},r.a.createElement("h1",null,"Summary"),r.a.createElement("br",null),r.a.createElement("h2",null,"You got: ",n," cards correct"),c&&r.a.createElement("h2",null,"Good job!!"),c&&r.a.createElement("img",{className:"confetti",src:"https://daranguyen.com/assets/confetti_emoji.png",alt:"Confetti"}),r.a.createElement("br",null),r.a.createElement("h3",null,"Time spent: ",e.overview["total time"]),r.a.createElement("br",null),r.a.createElement(Ca,{rows:e.details,columnType:ma.SUMMARY_COLUMNS}))}var Ra,Ia,La=function(e){var t=e.program,a=e.dispatch;return r.a.createElement("div",{className:"card-view-container"},r.a.createElement("div",{className:"card-view"},r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",justifyItems:"center"}},r.a.createElement(N,{deckNames:t.create_decks.map((function(e){return e.name})),dispatch:a}))))};!function(e){e[e.DECK=0]="DECK",e[e.STATS=1]="STATS",e[e.SESSION=2]="SESSION",e[e.POST_SESSION=3]="POST_SESSION",e[e.LIST=4]="LIST",e[e.DECK_DETAIL=5]="DECK_DETAIL",e[e.ERROR=6]="ERROR",e[e.LOADING=7]="LOADING"}(Ra||(Ra={})),function(e){e.SetCardEditor="set card editor",e.CardEditorParseSuccess="card editor parse success",e.StartSession="start session",e.PostSession="post session",e.List="list",e.ViewDeckDetail="view deck detail",e.ShowStats="show stats",e.LoadDecks="load decks",e.CommandNotFound="command not found",e.QuitToHome="quit to home"}(Ia||(Ia={}));var Ua=function(e,t){switch(R("Dispatched to App: ",t),t.type){case"set card editor":return Object(s.a)({},e,{cardEditor:t.cardEditor});case"card editor parse success":return Object(s.a)({},e,{program:t.program,view:Ra.DECK});case"start session":return console.log("Start session action received"),Object(s.a)({},e,{complexCommandParams:{limit:t.limit,filter:t.filter,isLimitAppliedToCards:t.isLimitAppliedToCards,deckNames:t.deckNames,subject:t.subject,tagNames:t.tagNames},view:Ra.SESSION});case"show stats":return Object(s.a)({},e,{view:Ra.STATS,complexCommandParams:{limit:t.limit,filter:t.filter,isLimitAppliedToCards:t.isLimitAppliedToCards,deckNames:t.deckNames,subject:t.subject}});case"list":return Object(s.a)({},e,{view:Ra.LIST});case"post session":return Object(s.a)({},e,{view:Ra.POST_SESSION});case"quit to home":return Object(s.a)({},e,{view:Ra.DECK});case"view deck detail":return Object(s.a)({},e,{view:Ra.DECK_DETAIL,deckToViewDetail:t.deckName});case"load decks":return e.cardEditor.getDoc().setValue(t.createDSLValue),e;case"command not found":return Object(s.a)({},e,{view:Ra.ERROR})}return R("Unexpected end of reducer dispatch!"),e};function Pa(){var e=function(){var e=localStorage.getItem("cardEditorStrKey"),t=localStorage.getItem("programAST");if(e)return{isFirstTimeUser:!1,initialText:e,initialProgram:JSON.parse(t)};B.makeTokenizer(Se,ne);var a=new ee;return a.parse(),localStorage.setItem("cardEditorStrKey",Se),localStorage.setItem("programAST",JSON.stringify(a)),{isFirstTimeUser:!0,initialText:Se,initialProgram:a}}(),t=e.isFirstTimeUser,a=e.initialText,c=e.initialProgram,i=Object(ie.useDatabase)();t&&ye(c,i);var s={view:Ra.DECK,program:c,cardEditor:void 0,deckToViewDetail:void 0,subjectToList:void 0,complexCommandParams:{limit:void 0,filter:void 0,isLimitAppliedToCards:void 0,deckNames:void 0,subject:Re.Undefined}},l=Object(n.useReducer)(Ua,s),d=Object(o.a)(l,2),f=d[0],p=f.view,h=f.program,m=f.deckToViewDetail,b=f.complexCommandParams,k=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar"},r.a.createElement(u,null)),r.a.createElement("div",{className:"container",style:{backgroundColor:"#fafafa"}},r.a.createElement(ze,{dispatch:k,program:h,initialText:a,isInSession:p===Ra.SESSION}),r.a.createElement(He,{dispatch:k}),function(e){switch(e!==Ra.SESSION&&e!==Ra.POST_SESSION&&localStorage.removeItem("sessionData"),e){case Ra.DECK:return r.a.createElement(C,{program:h,dispatch:k});case Ra.POST_SESSION:return r.a.createElement(za,null);case Ra.LIST:return r.a.createElement(r.a.Fragment,null,r.a.createElement(La,{program:h,dispatch:k}));case Ra.SESSION:return r.a.createElement(ha,{dispatch:k,complexCommandParams:b,program:h});case Ra.STATS:return r.a.createElement(Ta,{complexCommandParams:b});case Ra.DECK_DETAIL:return console.log(m),r.a.createElement(Aa,{name:m,deck:h.create_decks.filter((function(e){return e.name===m}))[0]});case Ra.ERROR:return r.a.createElement(De,{message:"Command not found. Type 'Help'"});case Ra.LOADING:return r.a.createElement(la.a,{style:{margin:"auto"}})}}(p)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fa=a(147),Ma=a.n(Fa),Qa=a(77),qa=a.n(Qa);function Ba(e,t,a){return{name:e,type:t,isIndexed:a}}var Ka,Wa,Ga,Va,Ya,Ja,Ha,$a,Xa,Za,en,tn,an,nn,rn,cn,on,sn,un,ln,dn,fn,pn,hn,mn,bn,kn,gn,vn,On,wn,yn,jn,xn,Sn,En,Nn,Cn,_n,Dn,Tn,An,zn,Rn,In,Ln,Un,Pn,Fn,Mn,Qn,qn,Bn,Kn,Wn,Gn,Vn,Yn,Jn,Hn,$n,Xn,Zn=Object(me.appSchema)({version:1,tables:[Object(me.tableSchema)({name:he.DECKS,columns:[Ba("name","string"),Ba("created_at","number")]}),Object(me.tableSchema)({name:he.CARDS,columns:[Ba("created_at","number"),Ba("updated_at","number"),Ba("last_tested_at","number"),Ba("deck_id","string",!0),Ba("front","string",!0),Ba("back","string",!0),Ba("wrong","number"),Ba("right","number")]}),Object(me.tableSchema)({name:he.SESSIONS,columns:[Ba("started_at","number"),Ba("ended_at","number")]}),Object(me.tableSchema)({name:he.SESSIONS_CARDS,columns:[Ba("session_id","string",!0),Ba("card_id","string",!0),Ba("is_correct","boolean")]}),Object(me.tableSchema)({name:he.TAGS,columns:[Ba("name","string",!0)]}),Object(me.tableSchema)({name:he.TAGS_CARDS,columns:[Ba("tag_id","string",!0),Ba("card_id","string",!0)]})]}),er=a(22),tr=a(16),ar=a(17),nr=(a(52),a(18)),rr=(Ka=Object(nr.date)("created_at"),Wa=Object(nr.date)("updated_at"),Ga=Object(nr.date)("last_tested_at"),Va=Object(nr.field)("deck_id"),Ya=Object(nr.field)("front"),Ja=Object(nr.field)("back"),Ha=Object(nr.field)("wrong"),$a=Object(nr.field)("right"),un=sn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(er.a)(e,"created_at",Za,Object(tr.a)(e)),Object(er.a)(e,"updated_at",en,Object(tr.a)(e)),Object(er.a)(e,"last_tested_at",tn,Object(tr.a)(e)),Object(er.a)(e,"deck_id",an,Object(tr.a)(e)),Object(er.a)(e,"front",nn,Object(tr.a)(e)),Object(er.a)(e,"back",rn,Object(tr.a)(e)),Object(er.a)(e,"wrong",cn,Object(tr.a)(e)),Object(er.a)(e,"right",on,Object(tr.a)(e)),e}return a}(me.Model),sn.table=he.CARDS,sn.associations=(ln={},Object(l.a)(ln,he.DECKS,{type:"belongs_to",key:"deck_id"}),Object(l.a)(ln,he.TAGS_CARDS,{type:"has_many",foreignKey:"card_id"}),Object(l.a)(ln,he.SESSIONS_CARDS,{type:"has_many",foreignKey:"card_id"}),ln),Xa=un,Za=Object(ar.a)(Xa.prototype,"created_at",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),en=Object(ar.a)(Xa.prototype,"updated_at",[Wa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn=Object(ar.a)(Xa.prototype,"last_tested_at",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an=Object(ar.a)(Xa.prototype,"deck_id",[Va],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nn=Object(ar.a)(Xa.prototype,"front",[Ya],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn=Object(ar.a)(Xa.prototype,"back",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn=Object(ar.a)(Xa.prototype,"wrong",[Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=Object(ar.a)(Xa.prototype,"right",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xa),cr=(dn=Object(nr.field)("name"),fn=Object(nr.date)("created_at"),pn=Object(nr.children)(he.CARDS),vn=gn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(er.a)(e,"name",mn,Object(tr.a)(e)),Object(er.a)(e,"created_at",bn,Object(tr.a)(e)),Object(er.a)(e,"cards",kn,Object(tr.a)(e)),e}return Object(T.a)(a,[{key:"addCard",value:function(){var e=Object(le.a)(ue.a.mark((function e(t,a){var n=this;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collections.get(he.CARDS).create((function(e){e.deck_id=n.id,e.front=t,e.back=a}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(me.Model),gn.table=he.DECKS,gn.associations=Object(l.a)({},he.CARDS,{type:"has_many",foreignKey:"deck_id"}),hn=vn,mn=Object(ar.a)(hn.prototype,"name",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bn=Object(ar.a)(hn.prototype,"created_at",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn=Object(ar.a)(hn.prototype,"cards",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(ar.a)(hn.prototype,"addCard",[nr.action],Object.getOwnPropertyDescriptor(hn.prototype,"addCard"),hn.prototype),hn),ir=(On=Object(nr.date)("started_at"),wn=Object(nr.date)("ended_at"),Cn=Nn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(er.a)(e,"started_at",jn,Object(tr.a)(e)),Object(er.a)(e,"ended_at",xn,Object(tr.a)(e)),Object(er.a)(e,"cards",Sn,Object(tr.a)(e)),Object(er.a)(e,"sessionCards",En,Object(tr.a)(e)),e}return a}(me.Model),Nn.table=he.SESSIONS,Nn.associations=Object(l.a)({},he.SESSIONS_CARDS,{type:"has_many",foreignKey:"session_id"}),yn=Cn,jn=Object(ar.a)(yn.prototype,"started_at",[On],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xn=Object(ar.a)(yn.prototype,"ended_at",[wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn=Object(ar.a)(yn.prototype,"cards",[nr.lazy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.collections.get(he.CARDS).query(me.Q.on(he.SESSIONS_CARDS,"session_id",this.id)).fetch()}}),En=Object(ar.a)(yn.prototype,"sessionCards",[nr.lazy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.collections.get(he.SESSIONS_CARDS).query(me.Q.where("session_id",this.id)).fetch()}}),yn),or=(_n=Object(nr.field)("session_id"),Dn=Object(nr.field)("card_id"),Tn=Object(nr.field)("is_correct"),Un=Ln=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(er.a)(e,"session_id",zn,Object(tr.a)(e)),Object(er.a)(e,"card_id",Rn,Object(tr.a)(e)),Object(er.a)(e,"is_correct",In,Object(tr.a)(e)),e}return a}(me.Model),Ln.table=he.SESSIONS_CARDS,Ln.associations=(Pn={},Object(l.a)(Pn,he.SESSIONS,{type:"belongs_to",key:"session_id"}),Object(l.a)(Pn,he.CARDS,{type:"belongs_to",key:"card_id"}),Pn),An=Un,zn=Object(ar.a)(An.prototype,"session_id",[_n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rn=Object(ar.a)(An.prototype,"card_id",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In=Object(ar.a)(An.prototype,"is_correct",[Tn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),An),sr=(Fn=Object(nr.field)("name"),Kn=Bn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(er.a)(e,"name",Qn,Object(tr.a)(e)),Object(er.a)(e,"cards",qn,Object(tr.a)(e)),e}return a}(me.Model),Bn.table=he.TAGS,Bn.associations=Object(l.a)({},he.TAGS_CARDS,{type:"has_many",foreignKey:"tag_id"}),Mn=Kn,Qn=Object(ar.a)(Mn.prototype,"name",[Fn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn=Object(ar.a)(Mn.prototype,"cards",[nr.lazy],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.collections.get(he.CARDS).query(me.Q.on(he.TAGS_CARDS,"tag_id",this.id)).fetch()}}),Mn),ur=(Wn=Object(nr.field)("tag_id"),Gn=Object(nr.field)("card_id"),$n=Hn=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(D.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),Object(er.a)(e,"tag_id",Yn,Object(tr.a)(e)),Object(er.a)(e,"card_id",Jn,Object(tr.a)(e)),e}return a}(me.Model),Hn.table=he.TAGS_CARDS,Hn.associations=(Xn={},Object(l.a)(Xn,he.TAGS,{type:"belongs_to",key:"tag_id"}),Object(l.a)(Xn,he.CARDS,{type:"belongs_to",key:"card_id"}),Xn),Vn=$n,Yn=Object(ar.a)(Vn.prototype,"tag_id",[Wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jn=Object(ar.a)(Vn.prototype,"card_id",[Gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vn),lr=new Ma.a({schema:Zn,useWebWorker:!1,useIncrementalIndexedDB:!0}),dr=new me.Database({adapter:lr,modelClasses:[rr,cr,ir,or,sr,ur],actionsEnabled:!0});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qa.a,{database:dr},r.a.createElement(Pa,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[156,1,2]]]);
//# sourceMappingURL=main.742f802a.chunk.js.map